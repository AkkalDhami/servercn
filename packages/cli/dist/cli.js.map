{"version":3,"sources":["../src/cli.ts","../src/commands/add.ts","../src/lib/paths.ts","../src/lib/copy.ts","../src/utils/cli-colors.ts","../src/utils/cli-logger.ts","../src/lib/registry.ts","../src/lib/architecture.ts","../src/lib/install-deps.ts","../src/lib/detect.ts","../src/lib/env.ts","../src/lib/package.ts","../src/lib/prompts.ts","../src/lib/assert-initialized.ts","../src/lib/config.ts","../src/commands/init.ts","../src/lib/registry-list.ts","../src/lib/group-by-category.ts","../src/commands/list.ts","../src/configs/env.ts"],"sourcesContent":["#!/usr/bin/env node\r\n\r\nimport { Command } from \"commander\";\r\nimport { add } from \"./commands/add\";\r\nimport { init } from \"./commands/init\";\r\nimport { list } from \"./commands/list\";\r\n\r\nconst program = new Command();\r\n\r\nprocess.on(\"SIGINT\", () => process.exit(0));\r\nprocess.on(\"SIGTERM\", () => process.exit(0));\r\n\r\nasync function main() {\r\n  program\r\n    .name(\"servercn\")\r\n    .description(\"Backend components for Node.js\")\r\n    .version(\"0.0.1\");\r\n\r\n  program\r\n    .command(\"init\")\r\n    .description(\"Initialize ServerCN in your project\")\r\n    .action(init);\r\n\r\n  program\r\n    .command(\"list\")\r\n    .description(\"List available ServerCN components\")\r\n    .action(list);\r\n\r\n  program\r\n    .command(\"add <component>\")\r\n    .description(\"Add a backend component\")\r\n    .option(\"--arch <arch>\", \"Architecture (mvc | feature | clean)\", \"mvc\")\r\n    .option(\"-f, --force\", \"Overwrite existing files\")\r\n    .option(\"--dry-run\", \"Preview changes without writing\")\r\n\r\n    .action((component, options) => {\r\n      return add(component, {\r\n        arch: options.arch,\r\n      });\r\n    });\r\n\r\n  program.parse(process.argv);\r\n}\r\n\r\nmain().catch((err) => {\r\n  console.error(err);\r\n  process.exit(1);\r\n});\r\n\r\nimport pino from \"pino\";\r\nimport { env } from \"./configs/env\";\r\n\r\nconst isProd = env.NODE_ENV === \"proud\";\r\n\r\nexport const logger = pino({\r\n  level: env.LOG_LEVEL,\r\n  transport: isProd\r\n    ? {\r\n        target: \"pino-pretty\",\r\n        options: {\r\n          colorize: true,\r\n          translateTime: \"yyyy-mm-dd HH:MM:ss\",\r\n          ignore: \"pid,hostname\",\r\n        },\r\n      }\r\n    : undefined,\r\n});\r\n\r\nlogger.info(\"Server started\");\r\nlogger.warn({ userId: \"123\" }, \"Suspicious activity detected\");\r\nlogger.error(\r\n  { err: \"Database connection failed\" },\r\n  \"Database connection failed\"\r\n);\r\n","import path from \"path\";\r\nimport prompts from \"prompts\";\r\n\r\nimport { getTemplatesPath } from \"../lib/paths\";\r\nimport { copyTemplate } from \"../lib/copy\";\r\nimport { getRegistryComponent } from \"../lib/registry\";\r\nimport { resolveTargetDir } from \"../lib/architecture\";\r\nimport { installDependencies } from \"../lib/install-deps\";\r\nimport { updateEnvExample } from \"../lib/env\";\r\nimport { ensurePackageJson, ensureTsConfig } from \"../lib/package\";\r\nimport { askFolderName, getDefaultFolderName } from \"../lib/prompts\";\r\nimport { logger } from \"../utils/cli-logger\";\r\nimport { AddOptions } from \"../types\";\r\nimport { assertInitialized } from \"../lib/assert-initialized\";\r\nimport { getServerCNConfig } from \"../lib/config\";\r\n\r\nexport async function add(componentName: string, options: AddOptions = {}) {\r\n  console.log(componentName);\r\n  /**\r\n   * ======================================================\r\n   * ASSERT INITIALIZED\r\n   * ======================================================\r\n   */\r\n  await assertInitialized();\r\n  const config = await getServerCNConfig();\r\n\r\n  /**\r\n\r\n   * LOAD COMPONENT\r\n  \r\n   */\r\n  const component = await getRegistryComponent(componentName);\r\n\r\n  if (!component.stacks.includes(config.stack.framework)) {\r\n    logger.error(\r\n      `Component \"${componentName}\" does not support \"${config.stack.framework}\"`\r\n    );\r\n    process.exit(1);\r\n  }\r\n\r\n  const stack = config.stack.framework;\r\n  const arch = config.stack.architecture;\r\n\r\n  /**\r\n   * ======================================================\r\n   * RESOLVE TARGET DIRECTORY\r\n   * ======================================================\r\n   */\r\n  const defaultFolder = getDefaultFolderName(component);\r\n  const folderName = await askFolderName(defaultFolder);\r\n  const targetDir = resolveTargetDir(folderName, arch);\r\n\r\n  let templateDir: string;\r\n  let runtimeDeps: string[] | undefined;\r\n  const devDeps = component.dependencies?.dev;\r\n\r\n  /**\r\n   * ======================================================\r\n   * ALGORITHM-BASED COMPONENTS\r\n   * (password-hashing, encryption, etc.)\r\n   * ======================================================\r\n   */\r\n  if (component.algorithms) {\r\n    const choices = Object.entries(component.algorithms).map(\r\n      ([key, value]: any) => ({\r\n        title: value.title,\r\n        value: key,\r\n      })\r\n    );\r\n\r\n    const { algorithm } = await prompts({\r\n      type: \"select\",\r\n      name: \"algorithm\",\r\n      message: \"Select implementation\",\r\n      choices,\r\n    });\r\n\r\n    if (!algorithm) {\r\n      logger.warn(\"Operation cancelled\");\r\n      return;\r\n    }\r\n\r\n    const algoConfig = component.algorithms[algorithm];\r\n\r\n    const selectedTemplate =\r\n      algoConfig.templates?.[arch] ?? algoConfig.templates?.base;\r\n\r\n    if (!selectedTemplate) {\r\n      logger.error(\r\n        `Architecture \"${arch}\" is not supported for \"${component.name}\"`\r\n      );\r\n      process.exit(1);\r\n    }\r\n\r\n    templateDir = path.resolve(getTemplatesPath(), selectedTemplate);\r\n    runtimeDeps = algoConfig.dependencies?.runtime;\r\n\r\n    logger.info(`Using algorithm: ${algoConfig.title}`);\r\n  } else {\r\n    /**\r\n     * ======================================================\r\n     * ARCHITECTURE-BASED COMPONENTS\r\n     * (api-error, jwt-auth, async-handler, etc.)\r\n     * ======================================================\r\n     */\r\n    const templateConfig = component.templates?.[stack];\r\n\r\n    if (!templateConfig) {\r\n      logger.error(`Stack \"${stack}\" is not supported by \"${component.name}\"`);\r\n      process.exit(1);\r\n    }\r\n\r\n    const selectedTemplate =\r\n      typeof templateConfig === \"string\"\r\n        ? templateConfig\r\n        : (templateConfig[arch] ?? templateConfig.base);\r\n\r\n    if (!selectedTemplate) {\r\n      logger.error(\r\n        `Architecture \"${arch}\" is not supported by \"${component.name}\"`\r\n      );\r\n      process.exit(1);\r\n    }\r\n\r\n    templateDir = path.resolve(getTemplatesPath(), selectedTemplate);\r\n    runtimeDeps = component.dependencies?.runtime;\r\n  }\r\n\r\n  /**\r\n   * ======================================================\r\n   * COPY TEMPLATE FILES\r\n   * ======================================================\r\n   */\r\n  await copyTemplate({\r\n    templateDir,\r\n    targetDir,\r\n    componentName,\r\n    conventions: config.conventions, // <-- fileNaming + functionNaming\r\n    replacements: {\r\n      PROJECT_NAME: config.project.name,\r\n    },\r\n    conflict: options.force ? \"overwrite\" : \"skip\",\r\n    dryRun: options.dryRun,\r\n  });\r\n\r\n  /**\r\n   * ======================================================\r\n   * PROJECT SAFETY CHECKS\r\n   * ======================================================\r\n   */\r\n  ensurePackageJson(process.cwd());\r\n  ensureTsConfig(process.cwd());\r\n\r\n  /**\r\n   * ======================================================\r\n   * INSTALL DEPENDENCIES (ROOT LEVEL)\r\n   * ======================================================\r\n   */\r\n  await installDependencies({\r\n    runtime: runtimeDeps,\r\n    dev: devDeps,\r\n    cwd: process.cwd(),\r\n  });\r\n\r\n  /**\r\n   * ======================================================\r\n   * ENV VARIABLES\r\n   * ======================================================\r\n   */\r\n  if (component.env?.length) {\r\n    updateEnvExample(component.env, process.cwd());\r\n  }\r\n\r\n  logger.success(`\\n${component.title} added successfully\\n`);\r\n  process.exit(0);\r\n}\r\n","import path from \"path\";\r\nimport { fileURLToPath } from \"url\";\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\n/**\r\n * Root of the installed servercn package\r\n * dist/lib → dist → cli → packages → servercn\r\n */\r\nexport function getServercnRoot() {\r\n  return path.resolve(__dirname, \"../../..\");\r\n}\r\n\r\nexport function getRegistryPath() {\r\n  return path.join(getServercnRoot(), \"packages/registry\");\r\n}\r\n// export function getRegistryPath(folder: string) {\r\n//   return path.join(getServercnRoot(), `packages/registry/${folder}`);\r\n// }\r\n\r\nexport function getTemplatesPath() {\r\n  return path.join(getServercnRoot(), \"packages/templates\");\r\n}\r\n","import fs from \"fs-extra\";\r\nimport path from \"path\";\r\nimport { logger } from \"../utils/cli-logger\";\r\nimport { CopyOptions, NamingConventions } from \"../types\";\r\n\r\nexport type ConflictStrategy = \"skip\" | \"overwrite\" | \"error\";\r\n\r\n\r\n\r\nfunction toKebabCase(value: string) {\r\n  return value\r\n    .replace(/([a-z])([A-Z])/g, \"$1-$2\")\r\n    .replace(/[\\s_]+/g, \"-\")\r\n    .toLowerCase();\r\n}\r\n\r\nfunction toCamelCase(value: string) {\r\n  return value\r\n    .replace(/[-_\\s]+(.)?/g, (_, c) => (c ? c.toUpperCase() : \"\"))\r\n    .replace(/^(.)/, (m) => m.toLowerCase());\r\n}\r\n\r\nfunction toPascalCase(value: string) {\r\n  const camel = toCamelCase(value);\r\n  return camel.charAt(0).toUpperCase() + camel.slice(1);\r\n}\r\n\r\nfunction toSnakeCase(value: string) {\r\n  return value\r\n    .replace(/([a-z])([A-Z])/g, \"$1_$2\")\r\n    .replace(/[\\s-]+/g, \"_\")\r\n    .toLowerCase();\r\n}\r\n\r\nfunction applyNaming(value: string, style?: NamingConventions[\"fileNaming\"]) {\r\n  switch (style) {\r\n    case \"camel-case\":\r\n      return toCamelCase(value);\r\n    case \"snake-case\":\r\n      return toSnakeCase(value);\r\n    case \"kebab-case\":\r\n    default:\r\n      return toKebabCase(value);\r\n  }\r\n}\r\n\r\nfunction applyFunctionNaming(\r\n  value: string,\r\n  style?: NamingConventions[\"functionNaming\"]\r\n) {\r\n  switch (style) {\r\n    case \"pascal-case\":\r\n      return toPascalCase(value);\r\n    case \"snake-case\":\r\n      return toSnakeCase(value);\r\n    case \"camel-case\":\r\n    default:\r\n      return toCamelCase(value);\r\n  }\r\n}\r\n\r\nexport async function copyTemplate({\r\n  templateDir,\r\n  targetDir,\r\n  componentName,\r\n  conventions,\r\n  replacements = {},\r\n  conflict = \"skip\",\r\n  dryRun = false,\r\n}: CopyOptions) {\r\n  if (!(await fs.pathExists(templateDir))) {\r\n    logger.error(`Template not found: ${templateDir}`);\r\n    return;\r\n  }\r\n\r\n  await fs.ensureDir(targetDir);\r\n\r\n  const entries = await fs.readdir(templateDir, { withFileTypes: true });\r\n\r\n  for (const entry of entries) {\r\n    const srcPath = path.join(templateDir, entry.name);\r\n\r\n    /**\r\n     * -----------------------------------------\r\n     * Filename handling\r\n     * -----------------------------------------\r\n     */\r\n    let rawName = entry.name === \"_gitignore\" ? \".gitignore\" : entry.name;\r\n\r\n    let finalName = rawName;\r\n\r\n    if (componentName && rawName.includes(\"component\")) {\r\n      const baseName = applyNaming(componentName, conventions.fileNaming);\r\n\r\n      finalName = rawName.replace(\"component\", baseName);\r\n    }\r\n\r\n    const destPath = path.join(targetDir, finalName);\r\n\r\n    /**\r\n     * -----------------------------------------\r\n     * Directory recursion\r\n     * -----------------------------------------\r\n     */\r\n    if (entry.isDirectory()) {\r\n      await copyTemplate({\r\n        templateDir: srcPath,\r\n        targetDir: destPath,\r\n        componentName,\r\n        conventions,\r\n        replacements,\r\n        conflict,\r\n        dryRun,\r\n      });\r\n      continue;\r\n    }\r\n\r\n    const exists = await fs.pathExists(destPath);\r\n\r\n    if (exists) {\r\n      if (conflict === \"skip\") {\r\n        logger.warn(`Skipped: ${destPath}`);\r\n        continue;\r\n      }\r\n      if (conflict === \"error\") {\r\n        throw new Error(`File already exists: ${destPath}`);\r\n      }\r\n    }\r\n\r\n    if (dryRun) {\r\n      logger.info(`[dry-run] ${exists ? \"Overwrite\" : \"Create\"}: ${destPath}`);\r\n      continue;\r\n    }\r\n\r\n    const buffer = await fs.readFile(srcPath);\r\n    const isBinary = buffer.includes(0);\r\n\r\n    await fs.ensureDir(path.dirname(destPath));\r\n\r\n    if (isBinary) {\r\n      await fs.copyFile(srcPath, destPath);\r\n    } else {\r\n      let content = buffer.toString(\"utf8\");\r\n\r\n      /**\r\n       * -----------------------------------------\r\n       * Default replacements\r\n       * -----------------------------------------\r\n       */\r\n      if (componentName) {\r\n        const fileName = applyNaming(componentName, conventions.fileNaming);\r\n\r\n        const functionName = applyFunctionNaming(\r\n          componentName,\r\n          conventions.functionNaming\r\n        );\r\n\r\n        content = content\r\n          .replaceAll(\"{{fileName}}\", fileName)\r\n          .replaceAll(\"{{FILE_NAME}}\", fileName.toUpperCase())\r\n          .replaceAll(\"{{functionName}}\", functionName)\r\n          .replaceAll(\"{{FUNCTION_NAME}}\", functionName.toUpperCase());\r\n      }\r\n\r\n      /**\r\n       * -----------------------------------------\r\n       * Custom replacements\r\n       * -----------------------------------------\r\n       */\r\n      for (const [key, value] of Object.entries(replacements)) {\r\n        content = content.replaceAll(`{{${key}}}`, value);\r\n      }\r\n\r\n      await fs.writeFile(destPath, content);\r\n    }\r\n\r\n    logger.success(\r\n      exists ? `Overwritten: ${destPath}` : `Created: ${destPath}`\r\n    );\r\n  }\r\n}\r\n","import kleur from \"kleur\";\r\n\r\nexport const colors = {\r\n  error: kleur.red,\r\n  warn: kleur.yellow,\r\n  info: kleur.cyan,\r\n  success: kleur.green,\r\n  muted: kleur.gray,\r\n  created: kleur.magenta,\r\n};\r\n","import { colors } from \"./cli-colors\";\r\n\r\nconst icons = {\r\n  error: \"✖\",\r\n  warn: \"⚠\",\r\n  info: \"ℹ\",\r\n  success: \"✔\",\r\n};\r\n\r\nexport const logger = {\r\n  error(...args: unknown[]) {\r\n    console.log(colors.error(`${args.join(\" \")}`));\r\n  },\r\n\r\n  warn(...args: unknown[]) {\r\n    console.log(colors.warn(`${args.join(\" \")}`));\r\n  },\r\n\r\n  info(...args: unknown[]) {\r\n    console.log(colors.info(`${args.join(\" \")}`));\r\n  },\r\n\r\n  success(...args: unknown[]) {\r\n    console.log(colors.success(`${args.join(\" \")}`));\r\n  },\r\n\r\n  log(...args: unknown[]) {\r\n    console.log(args.join(\" \"));\r\n  },\r\n\r\n  created(...args: unknown[]) {\r\n    console.log(colors.created(`✔ Created ${args.join(\" \")}`));\r\n  },\r\n\r\n  break() {\r\n    console.log(\"\");\r\n  },\r\n};\r\n","import fs from \"fs-extra\";\r\nimport path from \"path\";\r\nimport { getRegistryPath } from \"./paths.js\";\r\nimport { logger } from \"../utils/cli-logger.js\";\r\n\r\nexport async function getRegistryComponent(name: string) {\r\n  const registryPath = getRegistryPath();\r\n  const filePath = path.join(registryPath, `${name}.json`);\r\n\r\n  if (!(await fs.pathExists(filePath))) {\r\n    logger.error(`Component \"${name}\" not found`);\r\n    process.exit(1);\r\n  }\r\n\r\n  return fs.readJSON(filePath);\r\n}\r\n","import path from \"node:path\";\r\n\r\nexport function resolveTargetDir(folderName: string, arch: string) {\r\n  const cwd = process.cwd();\r\n\r\n  switch (arch) {\r\n    case \"mvc\":\r\n      return path.join(cwd, folderName);\r\n\r\n    case \"feature\":\r\n      return path.join(cwd, folderName);\r\n\r\n    case \"clean\":\r\n      return path.join(cwd, folderName);\r\n\r\n    default:\r\n      return cwd;\r\n  }\r\n}\r\n","import { execa } from \"execa\";\r\nimport { detectPackageManager } from \"./detect\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\ntype InstallOptions = {\r\n  runtime?: string[];\r\n  dev?: string[];\r\n  cwd: string;\r\n};\r\n\r\nexport async function installDependencies({\r\n  runtime = [],\r\n  dev = [],\r\n  cwd,\r\n}: InstallOptions) {\r\n  if (!runtime.length && !dev.length) return;\r\n\r\n  const pm = detectPackageManager();\r\n\r\n  const run = async (args: string[]) => {\r\n    logger.info(`Installing dependencies: ${args.join(\" \")}`);\r\n    await execa(pm, args, {\r\n      cwd,\r\n      stdio: \"inherit\",\r\n    });\r\n  };\r\n\r\n  if (runtime.length) {\r\n    await run(getInstallArgs(pm, runtime, false));\r\n  }\r\n\r\n  if (dev.length) {\r\n    await run(getInstallArgs(pm, dev, true));\r\n  }\r\n}\r\n\r\nfunction getInstallArgs(\r\n  pm: string,\r\n  packages: string[],\r\n  isDev: boolean\r\n): string[] {\r\n  switch (pm) {\r\n    case \"pnpm\":\r\n      return [\"add\", ...(isDev ? [\"-D\"] : []), ...packages];\r\n\r\n    case \"yarn\":\r\n      return [\"add\", ...(isDev ? [\"-D\"] : []), ...packages];\r\n\r\n    case \"bun\":\r\n      return [\"add\", ...(isDev ? [\"-d\"] : []), ...packages];\r\n\r\n    case \"npm\":\r\n    default:\r\n      return [\"install\", ...(isDev ? [\"--save-dev\"] : []), ...packages];\r\n  }\r\n}\r\n","import fs from \"node:fs\";\r\nimport path from \"node:path\";\r\n\r\nexport type PackageManager = \"pnpm\" | \"yarn\" | \"npm\" | \"bun\";\r\n\r\nexport function detectPackageManager(cwd = process.cwd()): PackageManager {\r\n  if (fs.existsSync(path.join(cwd, \"pnpm-lock.yaml\"))) return \"pnpm\";\r\n  if (fs.existsSync(path.join(cwd, \"yarn.lock\"))) return \"yarn\";\r\n  if (fs.existsSync(path.join(cwd, \"bun.lockb\"))) return \"bun\";\r\n  return \"npm\";\r\n}\r\n\r\nexport function detectLanguage() {\r\n  return fs.existsSync(\"tsconfig.json\") ? \"ts\" : \"js\";\r\n}\r\n","import fs from \"node:fs\";\r\nimport path from \"node:path\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nexport function updateEnvExample(envKeys: string[] = [], cwd = process.cwd()) {\r\n  if (!envKeys.length) return;\r\n\r\n  const envExamplePath = path.join(cwd, \".env.example\");\r\n\r\n  const existing = fs.existsSync(envExamplePath)\r\n    ? fs.readFileSync(envExamplePath, \"utf8\")\r\n    : \"\";\r\n\r\n  const existingKeys = new Set(\r\n    existing\r\n      .split(\"\\n\")\r\n      .map((line) => line.split(\"=\")[0]?.trim())\r\n      .filter(Boolean)\r\n  );\r\n\r\n  const newLines = envKeys\r\n    .filter((key) => !existingKeys.has(key))\r\n    .map((key) => `${key}=`);\r\n\r\n  if (!newLines.length) return;\r\n\r\n  const content =\r\n    existing.trim().length > 0\r\n      ? `${existing.trim()}\\n\\n${newLines.join(\"\\n\")}\\n`\r\n      : `${newLines.join(\"\\n\")}\\n`;\r\n\r\n  fs.writeFileSync(envExamplePath, content, \"utf8\");\r\n\r\n  logger.success(`Updated .env.example`);\r\n}\r\n","import fs from \"fs\";\r\nimport path from \"path\";\r\nimport { execSync } from \"child_process\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nexport function ensurePackageJson(dir: string) {\r\n  const pkgPath = path.join(dir, \"package.json\");\r\n\r\n  if (fs.existsSync(pkgPath)) return;\r\n\r\n  logger.info(\"Initializing package.json\");\r\n\r\n  execSync(\"npm init -y\", {\r\n    cwd: dir,\r\n    stdio: \"ignore\",\r\n  });\r\n}\r\n\r\nexport function ensureTsConfig(dir: string) {\r\n  const tsconfigPath = path.join(dir, \"tsconfig.json\");\r\n\r\n  if (fs.existsSync(tsconfigPath)) return;\r\n\r\n  const tsconfig = {\r\n    compilerOptions: {\r\n      target: \"ES2021\",\r\n      module: \"NodeNext\",\r\n      moduleResolution: \"NodeNext\",\r\n      strict: true,\r\n      esModuleInterop: true,\r\n      skipLibCheck: true,\r\n      outDir: \"dist\",\r\n      rootDir: \"src\",\r\n    },\r\n    include: [\"src\"],\r\n  };\r\n\r\n  fs.writeFileSync(tsconfigPath, JSON.stringify(tsconfig, null, 2));\r\n}\r\n","import prompts from \"prompts\";\r\n\r\nexport async function askFolderName(defaultName: string) {\r\n  const { folder } = await prompts({\r\n    type: \"text\",\r\n    name: \"folder\",\r\n    message: \"Where should this component be added?\",\r\n    initial: defaultName,\r\n  });\r\n\r\n  return folder || defaultName;\r\n}\r\nexport function getDefaultFolderName(component: {\r\n  category?: string;\r\n  name: string;\r\n}) {\r\n  return component.name;\r\n}\r\n","import fs from \"fs-extra\";\r\nimport path from \"path\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nconst CONFIG_FILE = \"servercn.json\";\r\n\r\nexport async function assertInitialized() {\r\n  const configPath = path.resolve(process.cwd(), CONFIG_FILE);\r\n\r\n  if (!(await fs.pathExists(configPath))) {\r\n    logger.error(\"ServerCN is not initialized in this project.\");\r\n    logger.info(\"Run the following command first:\");\r\n    logger.info(\"  npx servercn init\");\r\n    process.exit(1);\r\n  }\r\n}\r\n","import fs from \"fs-extra\";\r\nimport path from \"node:path\";\r\nimport { ServerCNConfig } from \"../types\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nexport const SERVERCN_CONFIG = \"servercn.json\" as const;\r\n\r\nexport async function getServerCNConfig(): Promise<ServerCNConfig> {\r\n  const cwd = process.cwd();\r\n  const configPath = path.resolve(cwd, \"servercn.json\");\r\n\r\n  if (!(await fs.pathExists(configPath))) {\r\n    logger.warn(\"ServerCN is not initialized. Run `servercn init` first.\");\r\n    process.exit(1);\r\n  }\r\n\r\n  return fs.readJSON(configPath);\r\n}\r\n","import fs from \"fs-extra\";\r\nimport path from \"path\";\r\nimport prompts from \"prompts\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nconst CONFIG_FILE = \"servercn.json\";\r\n\r\nexport async function init() {\r\n  const cwd = process.cwd();\r\n  const configPath = path.join(cwd, CONFIG_FILE);\r\n\r\n  if (await fs.pathExists(configPath)) {\r\n    logger.warn(\"ServerCN is already initialized in this project.\");\r\n    logger.info(\"You can now run: servercn add <component>\");\r\n    process.exit(1);\r\n  }\r\n\r\n  const response = await prompts([\r\n    {\r\n      type: \"text\",\r\n      name: \"root\",\r\n      message: \"Project root directory\",\r\n      initial: \".\",\r\n      format: (val) => val.trim() || \".\",\r\n    },\r\n    {\r\n      type: \"text\",\r\n      name: \"srcDir\",\r\n      message: \"Source directory\",\r\n      initial: \"src\",\r\n      format: (val) => val.trim() || \"src\",\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"architecture\",\r\n      message: \"Select architecture\",\r\n      choices: [\r\n        { title: \"MVC\", value: \"mvc\" },\r\n        { title: \"Feature-based\", value: \"feature\" },\r\n        { title: \"Clean Architecture\", value: \"clean\" },\r\n      ],\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"language\",\r\n      message: \"Language\",\r\n      choices: [\r\n        { title: \"TypeScript\", value: \"typescript\" },\r\n        { title: \"JavaScript\", value: \"javascript\" },\r\n      ],\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"framework\",\r\n      message: \"Backend framework\",\r\n      choices: [{ title: \"Express\", value: \"express\" }],\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"databaseType\",\r\n      message: \"Select database\",\r\n      choices: [\r\n        { title: \"MongoDB\", value: \"mongodb\" },\r\n        { title: \"PostgreSQL\", value: \"postgresql\" },\r\n        { title: \"MySQL\", value: \"mysql\" },\r\n        { title: \"SQLite\", value: \"sqlite\" },\r\n        { title: \"None / Not now\", value: \"none\" },\r\n      ],\r\n    },\r\n    {\r\n      type: (prev) => (prev === \"mongodb\" ? \"select\" : null),\r\n      name: \"orm\",\r\n      message: \"MongoDB library\",\r\n      choices: [\r\n        { title: \"Mongoose\", value: \"mongoose\" },\r\n        { title: \"Native MongoDB Driver\", value: \"mongodb\" },\r\n      ],\r\n    },\r\n    {\r\n      type: (_prev, values) =>\r\n        [\"postgresql\", \"mysql\", \"sqlite\"].includes(values.databaseType)\r\n          ? \"select\"\r\n          : null,\r\n      name: \"orm\",\r\n      message: \"ORM / Query builder\",\r\n      choices: [\r\n        { title: \"Prisma\", value: \"prisma\" },\r\n        { title: \"Drizzle\", value: \"drizzle\" },\r\n        { title: \"Sequelize\", value: \"sequelize\" },\r\n        { title: \"Knex\", value: \"knex\" },\r\n      ],\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"packageManager\",\r\n      message: \"Package manager\",\r\n      choices: [\r\n        { title: \"npm\", value: \"npm\" },\r\n        { title: \"pnpm\", value: \"pnpm\" },\r\n        { title: \"yarn\", value: \"yarn\" },\r\n      ],\r\n      initial: 0,\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"fileNaming\",\r\n      message: \"File naming convention\",\r\n      choices: [\r\n        { title: \"camelCase\", value: \"camel-case\" },\r\n        { title: \"kebab-case\", value: \"kebab-case\" },\r\n        { title: \"snake_case\", value: \"snake-case\" },\r\n        { title: \"PascalCase\", value: \"pascal-case\" },\r\n      ],\r\n    },\r\n    {\r\n      type: \"select\",\r\n      name: \"functionNaming\",\r\n      message: \"Function naming convention\",\r\n      choices: [\r\n        { title: \"camelCase\", value: \"camel-case\" },\r\n        { title: \"snake_case\", value: \"snake-case\" },\r\n        { title: \"PascalCase\", value: \"pascal-case\" },\r\n      ],\r\n    },\r\n  ]);\r\n\r\n  if (!response.architecture) {\r\n    logger.warn(\"Initialization cancelled.\");\r\n    return;\r\n  }\r\n\r\n  const rootPath = path.resolve(cwd, response.root);\r\n  const srcPath = path.resolve(rootPath, response.srcDir);\r\n\r\n  await fs.ensureDir(rootPath);\r\n  await fs.ensureDir(srcPath);\r\n\r\n  const config = {\r\n    $schema: \"https://servercn.dev/schema/v1.json\",\r\n    version: \"1.0.0\",\r\n\r\n    project: {\r\n      root: response.root,\r\n      srcDir: response.srcDir,\r\n      type: \"backend\",\r\n      packageManager: response.packageManager,\r\n    },\r\n\r\n    stack: {\r\n      runtime: \"node\",\r\n      language: response.language,\r\n      framework: response.framework,\r\n      architecture: response.architecture,\r\n    },\r\n\r\n    database:\r\n      response.databaseType === \"none\"\r\n        ? null\r\n        : {\r\n            type: response.databaseType,\r\n            orm: response.orm,\r\n          },\r\n\r\n    conventions: {\r\n      fileNaming: \"kebab-case\",\r\n      functionNaming: \"camel-case\",\r\n      envFile: \".env\",\r\n      testDir: \"__tests__\",\r\n    },\r\n\r\n    overrides: {},\r\n\r\n    meta: {\r\n      createdAt: new Date().toISOString(),\r\n      createdBy: \"servercn@1.0.0\",\r\n    },\r\n  };\r\n\r\n  await fs.writeJson(path.join(rootPath, CONFIG_FILE), config, { spaces: 2 });\r\n\r\n  logger.success(\"\\nSuccess! ServerCN initialized successfully.\");\r\n  logger.info(`Root directory: ${response.root}`);\r\n  logger.info(`Source directory: ${response.srcDir}`);\r\n\r\n  logger.info(\"You may now add components by running:\");\r\n  logger.info(\"- servercn add <component>\\n\");\r\n}\r\n","import fs from \"fs-extra\";\r\nimport path from \"node:path\";\r\nimport { getRegistryPath } from \"./paths\";\r\n\r\nexport async function loadRegistryComponents() {\r\n  const registryDir = getRegistryPath();\r\n  const files = await fs.readdir(registryDir);\r\n\r\n  const components = [];\r\n\r\n  for (const file of files) {\r\n    if (!file.endsWith(\".json\")) continue;\r\n\r\n    const fullPath = path.join(registryDir, file);\r\n    const data = await fs.readJSON(fullPath);\r\n\r\n    components.push(data);\r\n  }\r\n\r\n  return components;\r\n}\r\n","export function groupByCategory(components: any[]) {\r\n  return components.reduce<Record<string, any[]>>((acc, c) => {\r\n    const category = c.category ?? \"uncategorized\";\r\n    acc[category] ??= [];\r\n    acc[category].push(c);\r\n    return acc;\r\n  }, {});\r\n}\r\n","import { loadRegistryComponents } from \"../lib/registry-list\";\r\nimport { groupByCategory } from \"../lib/group-by-category\";\r\nimport { logger } from \"../utils/cli-logger\";\r\n\r\nexport async function list() {\r\n  const components = await loadRegistryComponents();\r\n  if (!components.length) {\r\n    logger.warn(\"No components found in registry.\");\r\n    return;\r\n  }\r\n\r\n  const grouped = groupByCategory(components);\r\n\r\n  for (const category of Object.keys(grouped).sort()) {\r\n    logger.info(`\\n${category.toUpperCase()}`);\r\n\r\n    const items = grouped[category].sort((a, b) =>\r\n      a.name.localeCompare(b.name)\r\n    );\r\n\r\n    for (const c of items) {\r\n      logger.log(`  • ${c.name} — ${c.title}`);\r\n    }\r\n  }\r\n}\r\n","import { z } from \"zod\";\r\n// import \"dotenv/config\";\r\nconst envSchema = z.object({\r\n  NODE_ENV: z.enum([\"dev\", \"test\", \"proud\"]).default(\"dev\"),\r\n  SERVERCN_SILENT: z.string().default(\"true\"),\r\n  //   PORT: z.string().default(\"3000\"),\r\n  //   DATABASE_URL: z.string(),\r\n\r\n  LOG_LEVEL: z.string().default(\"info\"),\r\n  //   JOIN_CODE_ENCRYPTION_KEY: z.string(),\r\n\r\n  //   JWT_REFRESH_SECRET: z.string(),\r\n  //   JWT_ACCESS_SECRET: z.string(),\r\n  //   COOKIE_SECRET: z.string(),\r\n\r\n  //   SMTP_HOST: z.string(),\r\n  //   SMTP_PORT: z.string(),\r\n  //   SMTP_USER: z.string(),\r\n  //   EMAIL_FROM: z.string(),\r\n\r\n  //   CLOUDINARY_CLOUD_NAME: z.string(),\r\n  //   CLOUDINARY_API_KEY: z.string(),\r\n  //   CLOUDINARY_API_SECRET: z.string(),\r\n\r\n  //   REDIS_URL: z.string(),\r\n\r\n  //   GOOGLE_CLIENT_ID: z.string(),\r\n  //   GOOGLE_CLIENT_SECRET: z.string(),\r\n  //   GOOGLE_REDIRECT_URI: z.string(),\r\n});\r\nconst parsed = envSchema.safeParse(process.env);\r\n\r\nif (!parsed.success) {\r\n  console.error(\r\n    \"❌ Invalid environment variables:\",\r\n    parsed.error.flatten().fieldErrors\r\n  );\r\n  process.exit(1);\r\n}\r\n\r\nexport const env = parsed.data;\r\n"],"mappings":"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","names":["path","prompts","path","path","fs","path","path","fs","path","fs","path","fs","path","path","fs","fs","path","path","fs","fs","path","path","fs","fs","path","path","fs","prompts","path","fs","path","prompts","CONFIG_FILE","path","fs","prompts","fs","path","fs","path","logger"]}