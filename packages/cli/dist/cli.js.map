{"version":3,"sources":["../src/cli.ts","../src/commands/add.ts","../src/lib/copy.ts","../src/utils/highlighter.ts","../src/utils/logger.ts","../src/lib/registry.ts","../src/lib/paths.ts","../src/lib/registry-list.ts","../src/lib/group-by-category.ts","../src/configs/env.ts","../src/constants/app-constants.ts","../src/utils/log.ts","../src/utils/capitalize.ts","../src/commands/list.ts","../src/lib/architecture.ts","../src/lib/install-deps.ts","../src/lib/detect.ts","../src/utils/spinner.ts","../src/lib/env.ts","../src/lib/package.ts","../src/lib/assert-initialized.ts","../src/lib/config.ts","../src/commands/init.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport { Command } from \"commander\";\nimport { add } from \"@/src/commands/add\";\nimport { init } from \"@/src/commands/init\";\nimport { list } from \"@/src/commands/list\";\nimport type { RegistryType } from \"./types\";\n\nconst program = new Command();\n\nprocess.on(\"SIGINT\", () => process.exit(0));\nprocess.on(\"SIGTERM\", () => process.exit(0));\n\nasync function main() {\n  program\n    .name(\"servercn\")\n    .description(\"Backend components for Node.js\")\n    .version(\"0.0.1\");\n\n  program\n    .command(\"init [foundation]\")\n    .description(\"Initialize ServerCN in your project\")\n    .action(init);\n\n  program\n    .command(\"list\")\n    .description(\"List available ServerCN components\")\n    .action(list);\n\n  program\n    .command(\"add <components...>\")\n    .description(\"Add a backend component\")\n    .option(\"--arch <arch>\", \"Architecture (mvc | feature)\", \"mvc\")\n    .option(\"--variant <variant>\", \"Variant (advanced | minimal)\", \"advanced\")\n    .option(\"-f, --force\", \"Overwrite existing files\")\n    .action(async (components: string[], options) => {\n      let type: RegistryType = \"component\";\n      let items = components;\n\n      if (components[0] === \"schema\") {\n        type = \"schema\";\n        items = components.slice(1).map(item => {\n          if (item === \"auth\") return \"auth/index\";\n          return item;\n        });\n      } else if (components[0] === \"blueprint\") {\n        type = \"blueprint\";\n        items = components.slice(1);\n      } else if (components[0] === \"tooling\") {\n        type = \"tooling\";\n        items = components.slice(1);\n      }\n\n      for (const item of items) {\n        await add(item, {\n          arch: options.arch,\n          variant: options.variant,\n          type: type,\n          force: options.force\n        });\n      }\n    });\n\n  program.parse(process.argv);\n}\n\nmain().catch(err => {\n  console.error(err);\n  process.exit(1);\n});\n","import path from \"node:path\";\nimport prompts from \"prompts\";\nimport { execa } from \"execa\";\nimport { copyTemplate } from \"../lib/copy\";\nimport { getRegistryComponent } from \"../lib/registry\";\nimport { resolveTargetDir } from \"../lib/architecture\";\nimport { installDependencies } from \"../lib/install-deps\";\nimport { updateEnvExample } from \"../lib/env\";\nimport { ensurePackageJson, ensureTsConfig } from \"../lib/package\";\nimport { logger } from \"../utils/logger\";\nimport { assertInitialized } from \"../lib/assert-initialized\";\nimport { getServerCNConfig } from \"../lib/config\";\nimport { paths } from \"../lib/paths\";\nimport type {\n  AddOptions,\n  DatabaseType,\n  DependencySet,\n  FrameworkType,\n  IBlueprint,\n  ISchema,\n  IServerCNConfig,\n  OrmType,\n  RegistryItem,\n  RegistryType\n} from \"../types\";\nimport { capitalize } from \"../utils/capitalize\";\nimport { spinner } from \"../utils/spinner\";\n\nexport async function add(componentName: string, options: AddOptions = {}) {\n  if (!componentName) {\n    logger.error(\"Component name is required.\");\n    process.exit(1);\n  }\n\n  const type: RegistryType = options.type ?? \"component\";\n\n  let component: RegistryItem;\n  if (type === \"blueprint\") {\n    component = await getRegistryComponent(componentName, type);\n  } else {\n    component = await getRegistryComponent(componentName, type);\n  }\n\n  await assertInitialized();\n  const config = await getServerCNConfig();\n\n  if (!component.stacks.includes(config.stack.framework)) {\n    logger.error(\n      `${capitalize(type)} '${componentName}' does not support '${config.stack.framework}'.`\n    );\n    process.exit(1);\n  }\n\n  if (!component.architectures.includes(config.stack.architecture)) {\n    logger.error(\n      `${capitalize(type)} '${componentName}' does not support '${config.stack.architecture}'.`\n    );\n    process.exit(1);\n  }\n\n  const { templatePath, additionalRuntimeDeps, additionalDevDeps } =\n    await resolveTemplateResolution(component, config, options);\n\n  const templateDir = path.resolve(paths.templates(), templatePath);\n  console.log(paths);\n  const targetDir = resolveTargetDir(\".\");\n\n  const result = spinner(\"Scaffolding Component Files\")?.start();\n  await copyTemplate({\n    templateDir,\n    targetDir,\n    componentName,\n    conflict: options.force ? \"overwrite\" : \"skip\",\n    dryRun: options.dryRun\n  });\n\n  result.succeed(\"Scaffolding Component Files Successfully!\");\n\n  ensurePackageJson(process.cwd());\n  ensureTsConfig(process.cwd());\n\n  const runtimeDeps = [\n    ...((component.dependencies?.runtime ?? []) as string[]),\n    ...additionalRuntimeDeps\n  ];\n  const devDeps = [\n    ...((component.dependencies?.dev ?? []) as string[]),\n    ...additionalDevDeps\n  ];\n\n  await installDependencies({\n    runtime: runtimeDeps,\n    dev: devDeps,\n    cwd: process.cwd()\n  });\n\n  await runPostInstallHooks(componentName, type, component);\n\n  logger.success(\n    `\\n${capitalize(type)}: ${component.slug} added successfully\\n`\n  );\n}\n\nasync function resolveTemplateResolution(\n  component: any,\n  config: IServerCNConfig,\n  options: AddOptions\n): Promise<{\n  templatePath: string;\n  additionalRuntimeDeps: string[];\n  additionalDevDeps: string[];\n}> {\n  const type = component.type as RegistryType;\n  const framework = config.stack.framework;\n  const architecture = config.stack.architecture;\n  if (component?.algorithms && type !== \"schema\") {\n    return resolveAlgorithmChoice(component, architecture);\n  }\n\n  const templateConfig = component.templates?.[framework];\n  if (!templateConfig) {\n    logger.error(\n      `Framework '${framework}' is not supported by '${component.title.toLowerCase()}'.`\n    );\n    process.exit(1);\n  }\n\n  let selectedPath: string | undefined;\n\n  switch (type) {\n    case \"schema\":\n      selectedPath = resolveDatabaseTemplate(\n        templateConfig,\n        config,\n        architecture,\n        options,\n        component.slug\n      );\n\n      if (selectedPath) {\n        const schemaDeps = resolveDependencies(\n          component as ISchema,\n          framework,\n          config.database?.type as DatabaseType,\n          config.database?.orm as OrmType\n        );\n        return {\n          templatePath: selectedPath,\n          additionalRuntimeDeps: schemaDeps.runtime,\n          additionalDevDeps: schemaDeps.dev\n        };\n      }\n      break;\n    case \"blueprint\":\n      selectedPath = resolveDatabaseTemplate(\n        templateConfig,\n        config,\n        architecture,\n        options,\n        component.slug\n      );\n\n      if (type === \"blueprint\" && selectedPath) {\n        const result = spinner(\"Installing Dependencies\").start();\n        const blueprintDeps = resolveDependencies(\n          component as IBlueprint,\n          framework,\n          config.database?.type as DatabaseType,\n          config.database?.orm as OrmType\n        );\n        result.succeed();\n        return {\n          templatePath: selectedPath,\n          additionalRuntimeDeps: blueprintDeps.runtime,\n          additionalDevDeps: blueprintDeps.dev\n        };\n      }\n      break;\n\n    case \"tooling\":\n      selectedPath = templateConfig[architecture];\n      break;\n\n    default:\n      selectedPath =\n        typeof templateConfig === \"string\"\n          ? templateConfig\n          : templateConfig[architecture];\n      break;\n  }\n\n  if (!selectedPath) {\n    logger.error(\n      `Architecture '${architecture}' is not supported for ${type} '${component.slug}'.`\n    );\n    process.exit(1);\n  }\n\n  return {\n    templatePath: selectedPath,\n    additionalRuntimeDeps: [],\n    additionalDevDeps: []\n  };\n}\n\nfunction resolveDatabaseTemplate(\n  templateConfig: any,\n  config: IServerCNConfig,\n  architecture: string,\n  options: AddOptions,\n  slug: string\n): string | undefined {\n  const dbType = config.database?.type;\n  const orm = config.database?.orm;\n\n  if (!dbType || !orm) {\n    logger.error(\n      \"Database or ORM not configured. Please run 'servercn init' first.\"\n    );\n    process.exit(1);\n  }\n\n  const dbConfig = templateConfig[dbType];\n  if (!dbConfig || !dbConfig[orm]) {\n    logger.error(\n      `Database stack \"${dbType}-${orm}\" is not supported by \"${slug}\".`\n    );\n    process.exit(1);\n  }\n\n  const archOptions = dbConfig[orm];\n  const selectedConfig = archOptions[architecture] ?? archOptions.base;\n\n  if (!selectedConfig) return undefined;\n\n  // Handle variants (e.g., minimal vs advanced) if they exist\n  const variant = options.variant || \"advanced\";\n  return typeof selectedConfig === \"string\"\n    ? selectedConfig\n    : selectedConfig[variant];\n}\n\nasync function resolveAlgorithmChoice(\n  component: any,\n  architecture: string\n): Promise<{\n  templatePath: string;\n  additionalRuntimeDeps: string[];\n  additionalDevDeps: string[];\n}> {\n  const choices = Object.entries(component.algorithms).map(\n    ([key, value]: any) => ({\n      title: value.title,\n      value: key\n    })\n  );\n\n  const { algorithm } = await prompts({\n    type: \"select\",\n    name: \"algorithm\",\n    message: \"Select implementation algorithm:\",\n    choices\n  });\n\n  if (!algorithm) {\n    logger.warn(\"Operation cancelled.\");\n    process.exit(0);\n  }\n\n  const algoConfig = component.algorithms[algorithm];\n  const selectedTemplate =\n    algoConfig.templates?.[architecture] ?? algoConfig.templates?.base;\n\n  if (!selectedTemplate) {\n    logger.error(\n      `Architecture \"${architecture}\" is not supported for algorithm \"${algorithm}\".`\n    );\n    process.exit(1);\n  }\n\n  return {\n    templatePath: selectedTemplate,\n    additionalRuntimeDeps: algoConfig.dependencies?.runtime ?? [],\n    additionalDevDeps: algoConfig.dependencies?.dev ?? []\n  };\n}\n\nasync function runPostInstallHooks(\n  componentName: string,\n  type: RegistryType,\n  component: any\n) {\n  if (type === \"tooling\" && componentName === \"husky\") {\n    try {\n      await execa(\"npx\", [\"husky\", \"init\"], { stdio: \"inherit\" });\n    } catch (error) {\n      logger.warn(\n        \"Could not initialize husky automatically. Please run 'npx husky init' manually.\"\n      );\n    }\n  }\n\n  if (component.env?.length) {\n    updateEnvExample(component.env, process.cwd());\n  }\n}\n\nfunction resolveDependencies(\n  component: IBlueprint | ISchema,\n  framework: FrameworkType,\n  db: DatabaseType,\n  orm: OrmType\n): DependencySet {\n  const sets = component.dependencies;\n\n  const relevantKeys = [\n    \"common\",\n    `stack:${framework}`,\n    `db:${db}`,\n    `orm:${orm}`\n  ];\n\n  return relevantKeys.reduce<DependencySet>(\n    (acc, key) => {\n      const set = sets[key];\n      if (set) {\n        acc.runtime.push(...(set.runtime || []));\n        acc.dev.push(...(set.dev || []));\n      }\n      return acc;\n    },\n    { runtime: [], dev: [] }\n  );\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport { logger } from \"../utils/logger\";\nimport type { CopyOptions } from \"../types\";\n\nexport type ConflictStrategy = \"skip\" | \"overwrite\" | \"error\";\n\nexport async function copyTemplate({\n  templateDir,\n  targetDir,\n  componentName,\n  conflict = \"skip\",\n  dryRun = false\n}: CopyOptions) {\n  if (!(await fs.pathExists(templateDir))) {\n    logger.error(`template not found: ${templateDir}`);\n    process.exit(1);\n  }\n\n  await fs.ensureDir(targetDir);\n\n  const entries = await fs.readdir(templateDir, { withFileTypes: true });\n\n  for (const entry of entries) {\n    const srcPath = path.join(templateDir, entry.name);\n\n    let rawName = entry.name === \"_gitignore\" ? \".gitignore\" : entry.name;\n\n    let finalName = rawName;\n    const destPath = path.join(targetDir, finalName);\n    const relativeDestPath = path.relative(process.cwd(), destPath);\n\n    if (entry.isDirectory()) {\n      await copyTemplate({\n        templateDir: srcPath,\n        targetDir: destPath,\n        componentName,\n        conflict,\n        dryRun\n      });\n      continue;\n    }\n\n    const exists = await fs.pathExists(destPath);\n\n    if (exists) {\n      if (conflict === \"skip\") {\n        logger.warn(`Skip: ${relativeDestPath} (already exists)`);\n        continue;\n      }\n      if (conflict === \"error\") {\n        throw new Error(`file already exists: ${relativeDestPath}`);\n      }\n    }\n\n    if (dryRun) {\n      logger.info(\n        `[dry-run] ${exists ? \"overwrite\" : \"create\"}: ${relativeDestPath}`\n      );\n      continue;\n    }\n\n    const buffer = await fs.readFile(srcPath);\n    const isBinary = buffer.includes(0);\n\n    await fs.ensureDir(path.dirname(destPath));\n\n    if (isBinary) {\n      await fs.copyFile(srcPath, destPath);\n    } else {\n      let content = buffer.toString(\"utf8\");\n\n      await fs.writeFile(destPath, content);\n    }\n\n    exists\n      ? logger.warn(`Skip: ${relativeDestPath}`)\n      : logger.created(`Create: ${relativeDestPath}`);\n  }\n}\n","import kleur from \"kleur\";\n\nexport const highlighter = {\n  error: kleur.red,\n  warn: kleur.yellow,\n  info: kleur.cyan,\n  success: kleur.green,\n  create: kleur.blue,\n  mute: kleur.dim\n};\n","// import kleur from \"kleur\";\n\nimport { highlighter } from \"./highlighter\";\n\n// export const logger = {\n//   log(...args: unknown[]) {\n//     console.log(args.join(\" \"));\n//   },\n//   break() {\n//     console.log(\"\");\n//   },\n//   created: (msg: string) => console.log(kleur.blue(\"✔ created: \" + msg)),\n//   info: (msg: string) => console.log(kleur.cyan(msg)),\n//   success: (msg: string) =>\n//     console.log(\"\\n\" + kleur.green(\"✔ success! \" + msg)),\n//   skip: (msg: string) => console.log(kleur.yellow(\"↺ skip: \" + msg)),\n//   error: (msg: string) => console.log(kleur.red(msg)),\n//   muted: (msg: string) => console.log(kleur.dim(msg)),\n//   warn: (msg: string) => console.log(kleur.yellow(\"⚠ \" + msg)),\n//   overwritten: (msg: string) =>\n//     console.log(kleur.yellow(\"↻ overwrite: \" + msg)),\n//   section: (title: string) => {\n//     console.log(\"\\n\" + title);\n//   }\n// };\n\nexport const logger = {\n  error(...args: unknown[]) {\n    console.log(highlighter.error(args.join(\" \")));\n  },\n  warn(...args: unknown[]) {\n    console.log(highlighter.warn(args.join(\" \")));\n  },\n  info(...args: unknown[]) {\n    console.log(highlighter.info(args.join(\" \")));\n  },\n  success(...args: unknown[]) {\n    console.log(highlighter.success(args.join(\" \")));\n  },\n  log(...args: unknown[]) {\n    console.log(args.join(\" \"));\n  },\n  break() {\n    console.log(\"\");\n  },\n  section: (title: string) => {\n    console.log(\"\\n\" + title);\n  },\n  muted: (msg: string) => console.log(highlighter.mute(msg)),\n  created: (msg: string) => console.log(highlighter.create(\"Create: \" + msg))\n};\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport { logger } from \"../utils/logger\";\nimport { paths } from \"./paths\";\nimport type { RegistryType } from \"../types\";\nimport { renderGrouppedRegistries } from \"../commands/list\";\nimport { capitalize } from \"../utils/capitalize\";\nimport { logInfo } from \"../utils/log\";\n\nexport async function getRegistryComponent(name: string, type: RegistryType) {\n  const registryPath = paths.registry(type);\n  const filePath = path.join(registryPath, `${name}.json`);\n\n  if (!(await fs.pathExists(filePath))) {\n    logger.break();\n    logger.error(\n      \"Something went wrong. Please check the error below for more details.\"\n    );\n    logger.error(`\\n${capitalize(type)} '${name}' not found!`);\n    logger.error(\"\\nCheck if the item name is correct.\");\n    await renderGrouppedRegistries(type, logInfo(type));\n    process.exit(1);\n  }\n\n  return fs.readJSON(filePath);\n}\n","import path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport type { RegistryType } from \"../types\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n/**\n * Absolute path to the installed servercn package root\n * dist/utils → dist → package root\n */\nexport function getServercnRoot() {\n  console.log({ path: path.resolve(__dirname, \"../../\") });\n  return path.resolve(__dirname, \"../../\");\n}\n\nexport const paths = {\n  root: getServercnRoot(),\n  registry: (f?: RegistryType) =>\n    path.join(getServercnRoot(), \"registry\", f ? `${f}s` : \"\"),\n  templates: () => path.join(getServercnRoot(), \"templates\")\n};\n","import fs from \"fs-extra\";\nimport path from \"node:path\";\nimport { paths } from \"./paths\";\nimport type { RegistryType } from \"../types\";\n\nexport async function loadRegistry(type: RegistryType) {\n  const registryDir = paths.registry(type);\n  const files = await fs.readdir(registryDir);\n\n  const components = [];\n\n  for (const file of files) {\n    let nestedFiles: string[] = [];\n    if (!file.endsWith(\".json\")) {\n      nestedFiles = await fs.readdir(path.join(registryDir, file));\n      for (const nestedFile of nestedFiles) {\n        if (!nestedFile.endsWith(\".json\")) continue;\n        const fullPath = path.join(registryDir, file, nestedFile);\n        const data = await fs.readJSON(fullPath);\n        components.push(data);\n      }\n    } else {\n      const fullPath = path.join(registryDir, file);\n      const data = await fs.readJSON(fullPath);\n      components.push(data);\n    }\n  }\n\n  return components;\n}\n","export function groupByCategory(components: any[]) {\n  return components.reduce<Record<string, any[]>>((acc, c) => {\n    const category = c.type ?? \"uncategorized\";\n    acc[category] ??= [];\n    acc[category].push(c);\n    return acc;\n  }, {});\n}\n","import { z } from \"zod\";\nimport \"dotenv/config\";\n\nconst envSchema = z.object({\n  NODE_ENV: z.string().default(\"development\"),\n  SERVERCN_SILENT: z.string().default(\"true\"),\n  LOG_LEVEL: z.string().default(\"info\"),\n  SERVERCN_URL: z.string().default(\"https://servercn.vercel.app\")\n});\nconst parsed = envSchema.safeParse(process.env);\n\nif (!parsed.success) {\n  console.error(\n    \"❌ Invalid environment variables:\",\n    z.prettifyError(parsed.error)\n  );\n  process.exit(1);\n}\n\nexport const env = parsed.data;\n","export const SERVERCN_CONFIG_FILE = \"servercn.config.json\" as const;\n\nexport const APP_NAME = \"ServerCN\";\nexport const LATEST_VERSION = \"1.0.0\";\n\nexport const RuntimeList = [\"node\"] as const;\n\nexport const FrameworkList = [\"express\"] as const;\n\nexport const LanguageList = [\"typescript\"] as const;\n\nexport const ArchitectureList = [\"mvc\", \"feature\"] as const;\n\nexport const DatabaseList = [\"mongodb\", \"postgresql\", \"mysql\"] as const;\n\nexport const OrmList = [\"mongoose\", \"drizzle\", \"prisma\"] as const;\n\nexport const RegistryTypeList = [\n  \"component\",\n  \"blueprint\",\n  \"guide\",\n  \"schema\",\n  \"foundation\",\n  \"tooling\"\n] as const;\n","import { env } from \"../configs/env\";\nimport { APP_NAME } from \"../constants/app-constants\";\nimport type { RegistryType } from \"../types\";\n\nexport const componentLogs = [\n  `To Add ${APP_NAME} Component Run: npx servercn add <component-name>`,\n  \"ex: npx servercn add http-status-codes\",\n  \"ex: npx servercn add jwt-utils rbac verify-auth-middleware\",\n  `For more info, Visit: ${env.SERVERCN_URL}/components`\n];\nexport const foundationLogs = [\n  `To Add ${APP_NAME} Foundation Run: npx servercn init <foundation-name>`,\n  \"ex: npx servercn init express-server\",\n  \"ex: npx servercn init drizzle-mysql-starter\",\n  \"ex: npx servercn init drizzle-pg-starter\",\n  `For more info, Visit: ${env.SERVERCN_URL}/foundations`\n];\nexport const blueprintLogs = [\n  `To Add ${APP_NAME} Blueprint Run: npx servercn add blueprint <blueprint-name>`,\n  \"ex: npx servercn add blueprint stateless-auth\",\n  `For more info, Visit: ${env.SERVERCN_URL}/blueprints`\n];\nexport const schemaLogs = [\n  `To Add ${APP_NAME} Schema Run: npx servercn add schema <schema-name>`,\n  \"ex: npx servercn add schema auth\",\n  \"ex: npx servercn add schema auth/user\",\n  \"ex: npx servercn add schema auth/otp\",\n  \"ex: npx servercn add schema auth/session\",\n  `For more info, Visit: ${env.SERVERCN_URL}/schemas`\n];\nexport const toolingLogs = [\n  `To Add ${APP_NAME} Tooling Run: npx servercn add tooling <tooling-name>`,\n  \"ex: npx servercn add tooling commitlint\",\n  \"ex: npx servercn add tooling eslint husky prettier\",\n  `For more info, Visit: ${env.SERVERCN_URL}`\n];\n\nexport function logInfo(type: RegistryType) {\n  switch (type) {\n    case \"component\":\n      return componentLogs;\n    case \"blueprint\":\n      return blueprintLogs;\n    case \"schema\":\n      return schemaLogs;\n    case \"foundation\":\n      return foundationLogs;\n    case \"tooling\":\n      return toolingLogs;\n\n    default:\n      return componentLogs;\n  }\n}\n","export function capitalize(name: string) {\n  return (\n    name.split(\"\")[0].toUpperCase() +\n    name.split(\"\").slice(1).join(\"\").toLowerCase()\n  );\n}\n","import { loadRegistry } from \"../lib/registry-list\";\nimport { groupByCategory } from \"../lib/group-by-category\";\nimport { logger } from \"../utils/logger\";\nimport type { RegistryType } from \"../types\";\nimport {\n  blueprintLogs,\n  componentLogs,\n  foundationLogs,\n  schemaLogs,\n  toolingLogs\n} from \"../utils/log\";\nimport { capitalize } from \"../utils/capitalize\";\n\nexport async function renderGrouppedRegistries(\n  type: RegistryType,\n  logs?: string[]\n) {\n  const components = await loadRegistry(type);\n  const groupedComponents = groupByCategory(components);\n  let i = 1;\n  for (const category of Object.keys(groupedComponents).sort()) {\n    logger.info(`\\nAvailable ${capitalize(category)}s:`);\n    const items = groupedComponents[category].sort((a, b) =>\n      a.title.localeCompare(b.title)\n    );\n\n    for (const c of items) {\n      logger.log(`${i++}. ${capitalize(c.title)}: ${c.slug}`);\n    }\n    logger.break();\n    logs && logs.map(log => logger.muted(log));\n  }\n}\nexport async function list() {\n  await renderGrouppedRegistries(\"component\", componentLogs);\n  await renderGrouppedRegistries(\"foundation\", foundationLogs);\n  await renderGrouppedRegistries(\"blueprint\", blueprintLogs);\n  await renderGrouppedRegistries(\"schema\", schemaLogs);\n  await renderGrouppedRegistries(\"tooling\", toolingLogs);\n}\n","import path from \"node:path\";\n\nexport function resolveTargetDir(folderName: string) {\n  const cwd = process.cwd();\n  return path.join(cwd, folderName);\n}\n","import { execa } from \"execa\";\nimport { detectPackageManager } from \"./detect\";\nimport { logger } from \"../utils/logger\";\nimport type { InstallOptions } from \"../types\";\nimport { spinner } from \"../utils/spinner\";\n\nexport async function installDependencies({\n  runtime = [],\n  dev = [],\n  cwd\n}: InstallOptions) {\n  if (!runtime.length && !dev.length) return;\n\n  const pm = detectPackageManager();\n\n  const result = spinner(\"Installing Dependencies\")?.start();\n  const run = async (args: string[]) => {\n    await execa(pm, args, {\n      cwd,\n      stdio: \"inherit\"\n    });\n  };\n\n  result?.succeed(\n    `Installed ${runtime.length} ${runtime.length > 1 ? \"Dependencies\" : \"Dependency\"}`\n  );\n  await run(getInstallArgs(pm, runtime, false));\n  // logger.success(\n  //   `Installed ${runtime.length} ${runtime.length > 1 ? \"Dependencies\" : \"Dependency\"}`\n  // );\n\n  await run(getInstallArgs(pm, dev, true));\n  result?.succeed(\n    `Installed ${dev.length} ${dev.length > 1 ? \"DevDependencies\" : \"DevDependency\"}`\n  );\n  // logger.success(\n  //   `Installed ${dev.length} ${dev.length > 1 ? \"DevDependencies\" : \"DevDependency\"}`\n  // );\n}\n\nfunction getInstallArgs(\n  pm: string,\n  packages: string[],\n  isDev: boolean\n): string[] {\n  switch (pm) {\n    case \"pnpm\":\n      return [\"add\", ...(isDev ? [\"-D\"] : []), ...packages];\n\n    case \"yarn\":\n      return [\"add\", ...(isDev ? [\"-D\"] : []), ...packages];\n\n    case \"bun\":\n      return [\"add\", ...(isDev ? [\"-d\"] : []), ...packages];\n\n    case \"npm\":\n    default:\n      return [\"install\", ...(isDev ? [\"--save-dev\"] : []), ...packages];\n  }\n}\n","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport type { PackageManager } from \"../types\";\n\nexport function detectPackageManager(cwd = process.cwd()): PackageManager {\n  if (fs.existsSync(path.join(cwd, \"pnpm-lock.yaml\"))) return \"pnpm\";\n  if (fs.existsSync(path.join(cwd, \"yarn.lock\"))) return \"yarn\";\n  if (fs.existsSync(path.join(cwd, \"bun.lockb\"))) return \"bun\";\n  return \"npm\";\n}\n\nexport function detectLanguage() {\n  return fs.existsSync(\"tsconfig.json\") ? \"ts\" : \"js\";\n}\n","import ora, { type Options } from \"ora\";\n\nexport function spinner(\n  text: Options[\"text\"],\n  options?: {\n    silent?: boolean;\n  }\n) {\n  return ora({\n    text,\n    isSilent: options?.silent\n  });\n}\n","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { logger } from \"../utils/logger\";\n\nexport function updateEnvExample(envKeys: string[] = [], cwd = process.cwd()) {\n  if (!envKeys.length) return;\n\n  const envExamplePath = path.join(cwd, \".env.example\");\n\n  const existing = fs.existsSync(envExamplePath)\n    ? fs.readFileSync(envExamplePath, \"utf8\")\n    : \"\";\n\n  const existingKeys = new Set(\n    existing\n      .split(\"\\n\")\n      .map(line => line.split(\"=\")[0]?.trim())\n      .filter(Boolean)\n  );\n\n  const newLines = envKeys\n    .filter(key => !existingKeys.has(key))\n    .map(key => `${key}=`);\n\n  if (!newLines.length) return;\n\n  const content =\n    existing.trim().length > 0\n      ? `${existing.trim()}\\n\\n${newLines.join(\"\\n\")}\\n`\n      : `${newLines.join(\"\\n\")}\\n`;\n\n  fs.writeFileSync(envExamplePath, content, \"utf8\");\n\n  logger.log(`Updated .env.example`);\n  logger.info(`Configure your environment variables in .env file.`);\n}\n","import fs from \"fs\";\nimport path from \"path\";\nimport { execSync } from \"child_process\";\nimport { logger } from \"../utils/logger\";\n\nexport function ensurePackageJson(dir: string) {\n  const pkgPath = path.join(dir, \"package.json\");\n\n  if (fs.existsSync(pkgPath)) return;\n\n  logger.info(\"initializing package.json\");\n\n  execSync(\"npm init -y\", {\n    cwd: dir,\n    stdio: \"ignore\"\n  });\n}\n\nexport function ensureTsConfig(dir: string) {\n  const tsconfigPath = path.join(dir, \"tsconfig.json\");\n\n  if (fs.existsSync(tsconfigPath)) return;\n\n  const tsconfig = {\n    compilerOptions: {\n      target: \"ES2021\",\n      module: \"NodeNext\",\n      moduleResolution: \"NodeNext\",\n      strict: true,\n      esModuleInterop: true,\n      skipLibCheck: true,\n      outDir: \"dist\",\n      rootDir: \"src\"\n    },\n    include: [\"src\"]\n  };\n\n  fs.writeFileSync(tsconfigPath, JSON.stringify(tsconfig, null, 2));\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport { logger } from \"../utils/logger\";\nimport { APP_NAME, SERVERCN_CONFIG_FILE } from \"../constants/app-constants\";\nimport { env } from \"../configs/env\";\n\nexport async function assertInitialized() {\n  const configPath = path.resolve(process.cwd(), SERVERCN_CONFIG_FILE);\n\n  if (!(await fs.pathExists(configPath))) {\n    logger.error(`${APP_NAME} is not initialized in this project.`);\n    logger.info(\"Run the following command first:\");\n    logger.log(\"=> npx servercn init\");\n    logger.muted(\"For express server: npx servercn init express-server\");\n    logger.muted(\n      \"For (drizzle + mysql) starter: npx servercn init drizzle-mysql-starter\"\n    );\n    logger.muted(\n      \"For (drizzle + postgresql) starter: npx servercn init drizzle-pg-starter\"\n    );\n\n    logger.muted(\n      `Visit ${env.SERVERCN_URL}/docs/installation for more information`\n    );\n    process.exit(1);\n  }\n}\n","import fs from \"fs-extra\";\nimport path from \"node:path\";\nimport { logger } from \"../utils/logger\";\nimport type { DatabaseConfig, IServerCNConfig } from \"../types\";\nimport { SERVERCN_CONFIG_FILE } from \"../constants/app-constants\";\n\nexport async function getServerCNConfig(): Promise<IServerCNConfig> {\n  const cwd = process.cwd();\n  const configPath = path.resolve(cwd, SERVERCN_CONFIG_FILE);\n\n  if (!(await fs.pathExists(configPath))) {\n    logger.warn(\"ServerCN is not initialized. Run `servercn init` first.\");\n    process.exit(1);\n  }\n\n  return fs.readJSON(configPath);\n}\n\nexport function getDatabaseConfig(foundation: string): DatabaseConfig | null {\n  switch (foundation) {\n    case \"express-server\":\n    case \"mongoose-starter\":\n      return { type: \"mongodb\", orm: \"mongoose\" };\n    case \"drizzle-mysql-starter\":\n      return { type: \"mysql\", orm: \"drizzle\" };\n    case \"drizzle-pg-starter\":\n      return { type: \"postgresql\", orm: \"drizzle\" };\n    case \"prisma-mongo-starter\":\n      return { type: \"mongodb\", orm: \"prisma\" };\n    case \"prisma-pg-starter\":\n      return { type: \"postgresql\", orm: \"prisma\" };\n    default:\n      return null;\n  }\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport prompts from \"prompts\";\nimport { execa } from \"execa\";\nimport { logger } from \"../utils/logger\";\nimport {\n  APP_NAME,\n  LATEST_VERSION,\n  SERVERCN_CONFIG_FILE\n} from \"../constants/app-constants\";\nimport { getRegistryComponent } from \"../lib/registry\";\nimport { copyTemplate } from \"../lib/copy\";\nimport { installDependencies } from \"../lib/install-deps\";\nimport { getDatabaseConfig } from \"../lib/config\";\nimport { paths } from \"../lib/paths\";\nimport type { IFoundation, IServerCNConfig } from \"../types\";\n\nexport async function init(foundation?: string) {\n  const cwd = process.cwd();\n  const configPath = path.join(cwd, SERVERCN_CONFIG_FILE);\n\n  if ((await fs.pathExists(configPath)) && !foundation) {\n    logger.warn(`${APP_NAME} is already initialized in this project.`);\n    logger.info(\n      \"You can now add components: npx servercn add <component-name>\"\n    );\n    process.exit(1);\n  }\n\n  const tsConfig = {\n    compilerOptions: {\n      target: \"ES2021\",\n      module: \"es2022\",\n      moduleResolution: \"bundler\",\n      strict: true,\n      esModuleInterop: true,\n      skipLibCheck: true,\n      outDir: \"dist\",\n      rootDir: \"src\",\n      sourceMap: true,\n      alwaysStrict: true,\n      useUnknownInCatchVariables: true,\n      forceConsistentCasingInFileNames: true,\n      baseUrl: \".\",\n      paths: {\n        \"@/*\": [\"./*\"]\n      }\n    },\n    include: [\"src/**/*\"],\n    exclude: [\"node_modules\"]\n  };\n\n  if (foundation) {\n    const response = await prompts([\n      {\n        type: \"text\",\n        name: \"root\",\n        message: \"Project root directory\",\n        initial: \".\",\n        format: val => val.trim() || \".\"\n      },\n      {\n        type: \"select\",\n        name: \"architecture\",\n        message: \"Select architecture\",\n        choices: [\n          { title: \"mvc (controllers, services, models)\", value: \"mvc\" },\n          { title: \"feature (modules, shared)\", value: \"feature\" }\n        ]\n      },\n      {\n        type: \"confirm\",\n        name: \"initGit\",\n        message: \"Initialize git repository?\",\n        initial: true\n      }\n    ]);\n\n    const rootPath = path.resolve(cwd, response.root);\n\n    await fs.ensureDir(rootPath);\n\n    if (!fs.pathExistsSync(rootPath)) {\n      logger.error(`Failed to create project directory: ${rootPath}`);\n      process.exit(1);\n    }\n\n    if (response.initGit) {\n      try {\n        await execa(\"git\", [\"init\"], { cwd: rootPath });\n        logger.info(\"Initialized git repository.\");\n      } catch (error) {\n        logger.warn(\"Failed to initialize git repository. is git installed?\");\n      }\n    }\n\n    logger.info(`initializing with foundation: ${foundation}`);\n\n    try {\n      const component: IFoundation = await getRegistryComponent(\n        foundation,\n        \"foundation\"\n      );\n\n      const config: IServerCNConfig = {\n        version: \"1.0.0\",\n\n        project: {\n          root: response.root,\n          srcDir: \"src\",\n          type: \"backend\"\n        },\n\n        stack: {\n          runtime: \"node\",\n          language: \"typescript\",\n          framework: \"express\",\n          architecture: response.architecture\n        },\n\n        database: getDatabaseConfig(foundation),\n\n        overrides: {},\n\n        meta: {\n          createdAt: new Date().toISOString(),\n          createdBy: \"servercn@1.0.0\"\n        }\n      };\n\n      const prettierConfig = {\n        singleQuote: false,\n        semi: true,\n        tabWidth: 2,\n        trailingComma: \"none\",\n        bracketSameLine: false,\n        arrowParens: \"avoid\",\n        endOfLine: \"lf\"\n      };\n\n      const commitlintConfig = {\n        extends: [\"@commitlint/config-conventional\"],\n        rules: {\n          \"type-enum\": [\n            2,\n            \"always\",\n            [\n              \"feat\",\n              \"fix\",\n              \"docs\",\n              \"style\",\n              \"refactor\",\n              \"test\",\n              \"chore\",\n              \"ci\",\n              \"perf\",\n              \"build\",\n              \"release\",\n              \"workflow\",\n              \"security\"\n            ]\n          ],\n\n          \"subject-case\": [2, \"always\", [\"lower-case\"]]\n        }\n      };\n\n      await fs.writeJson(path.join(rootPath, SERVERCN_CONFIG_FILE), config, {\n        spaces: 2\n      });\n\n      await fs.writeJson(path.join(rootPath, \".prettierrc\"), prettierConfig, {\n        spaces: 2\n      });\n\n      await fs.writeFile(\n        path.join(rootPath, \".prettierignore\"),\n        `build\\ndist\\n.env\\nnode_modules`\n      );\n      await fs.writeFile(\n        path.join(rootPath, \".gitignore\"),\n        `build\\ndist\\n.env\\nnode_modules`\n      );\n\n      await fs.writeJson(path.join(rootPath, \"tsconfig.json\"), tsConfig, {\n        spaces: 2\n      });\n\n      await fs.writeFile(\n        path.join(rootPath, \"commitlint.config.ts\"),\n        `export default ${JSON.stringify(commitlintConfig, null, 2)}`\n      );\n\n      const templatePathRelative: string =\n        component.templates.express[response.architecture as \"mvc\" | \"feature\"];\n\n      if (!templatePathRelative) {\n        logger.error(\n          `Template not found for ${foundation.toLowerCase()} (express/${response.architecture})`\n        );\n      }\n\n      const templateDir = path.resolve(paths.templates(), templatePathRelative);\n\n      await copyTemplate({\n        templateDir,\n        targetDir: rootPath,\n        componentName: foundation,\n        conflict: \"overwrite\"\n      });\n\n      await installDependencies({\n        runtime: component.dependencies.runtime,\n        dev: component.dependencies.dev,\n        cwd: rootPath\n      });\n\n      logger.success(`${APP_NAME} initialized with ${foundation}.`);\n      logger.info(\"Configure environment variables in .env file.\");\n      logger.log(\"Run the following commands:\");\n\n      if (response.root === \".\") {\n        logger.muted(`1. npm run dev\\n`);\n      } else {\n        logger.muted(`1. cd ${response.root}`);\n        logger.muted(`2. npm run dev\\n`);\n      }\n\n      return;\n    } catch (error) {\n      logger.error(`Failed to initialize foundation: ${error}`);\n      process.exit(1);\n    }\n  }\n\n  const response = await prompts([\n    {\n      type: \"text\",\n      name: \"root\",\n      message: \"Project root directory\",\n      initial: \".\",\n      format: val => val.trim() || \".\"\n    },\n    {\n      type: \"text\",\n      name: \"srcDir\",\n      message: \"Source directory\",\n      initial: \"src\",\n      format: val => val.trim() || \"src\"\n    },\n    {\n      type: \"select\",\n      name: \"architecture\",\n      message: \"Select architecture\",\n      choices: [\n        { title: \"MVC (controllers, services, models)\", value: \"mvc\" },\n        { title: \"Feature-based (domain-driven modules)\", value: \"feature\" }\n      ]\n    },\n    {\n      type: \"select\",\n      name: \"language\",\n      message: \"Programming language\",\n      choices: [\n        {\n          title: \"typescript (recommended)\",\n          value: \"typescript\"\n        }\n      ]\n    },\n    {\n      type: \"select\",\n      name: \"framework\",\n      message: \"Backend framework\",\n      choices: [{ title: \"express\", value: \"express\" }]\n    },\n    {\n      type: \"select\",\n      name: \"databaseType\",\n      message: \"Select database\",\n      choices: [\n        {\n          title: \"mongodb\",\n          value: \"mongodb\"\n        },\n        {\n          title: \"postgresql\",\n          value: \"postgresql\"\n        },\n        {\n          title: \"mysql\",\n          value: \"mysql\"\n        }\n      ]\n    },\n    {\n      type: prev => (prev === \"mongodb\" ? \"select\" : null),\n      name: \"orm\",\n      message: \"Mongodb library\",\n      choices: [{ title: \"mongoose\", value: \"mongoose\" }]\n    },\n    {\n      type: (_prev, values) =>\n        [\"postgresql\", \"mysql\"].includes(values.databaseType) ? \"select\" : null,\n      name: \"orm\",\n      message: \"Orm / query builder\",\n      choices: [\n        { title: \"drizzle\", value: \"drizzle\" }\n        // { title: \"prisma\", value: \"prisma\" }\n      ]\n    }\n  ]);\n\n  if (!response.architecture) {\n    logger.warn(\"Initialization cancelled.\");\n    return;\n  }\n\n  const rootPath = path.resolve(cwd, response.root);\n  const srcPath = path.resolve(rootPath, response.srcDir);\n\n  await fs.ensureDir(rootPath);\n  await fs.ensureDir(srcPath);\n\n  const config = {\n    version: \"1.0.0\",\n\n    project: {\n      root: response.root,\n      srcDir: response.srcDir,\n      type: \"backend\"\n    },\n\n    stack: {\n      runtime: \"node\",\n      language: response.language,\n      framework: response.framework,\n      architecture: response.architecture\n    },\n\n    database:\n      response.databaseType === \"none\"\n        ? null\n        : {\n            type: response.databaseType,\n            orm: response.orm\n          },\n\n    overrides: {},\n\n    meta: {\n      createdAt: new Date().toISOString(),\n      createdBy: `servercn@${LATEST_VERSION}`\n    }\n  };\n\n  await fs.writeJson(path.join(rootPath, SERVERCN_CONFIG_FILE), config, {\n    spaces: 2\n  });\n\n  logger.success(`\\n${APP_NAME} initialized successfully.`);\n\n  logger.log(\"You may now add components by running:\");\n  if (response.root === \".\") {\n    logger.muted(\"1. npx servercn add <component>\");\n  } else {\n    logger.muted(`1. cd ${response.root}`);\n    logger.muted(\"2. npx servercn add <component>\");\n  }\n  logger.muted(\n    \"ex: npx servercn add jwt-utils error-handler http-status-codes\"\n  );\n}\n"],"mappings":"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","names":["path","execa","fs","path","path","fs","path","fs","path","path","fs","path","fs","path","fs","path","path","fs","fs","path","path","fs","fs","path","path","fs","fs","path","path","fs","path","execa","fs","path","prompts","execa","path","fs","response","prompts","rootPath","execa","config"]}