---
title: Express Server | Foundation
description: The Express Server Foundation is the core starting block provided by servercn.
command: npx servercn init express-server

mvc_structure:
  - type: folder
    name: src
    children:
      - type: folder
        name: configs
        children:
          - type: file
            name: env.ts
            content: |
              import "dotenv/config";

              interface Config {
                PORT: number;
                NODE_ENV: string;
                LOG_LEVEL: string;
                CORS_ORIGIN: string;
              }

              const env: Config = {
                PORT: Number(process.env.PORT) || 3000,
                NODE_ENV: process.env.NODE_ENV || "development",
                LOG_LEVEL: process.env.LOG_LEVEL || "info",
                CORS_ORIGIN: process.env.CORS_ORIGIN || "*"
              };

              export default env;
      
      - type: folder
        name: constants
        children:
          - type: file
            name: status-codes.ts
            content: |
              export const STATUS_CODES = {
                // 2xx Success
                OK: 200,
                CREATED: 201,
                ACCEPTED: 202,
                NO_CONTENT: 204,

                // 3xx Redirection
                MOVED_PERMANENTLY: 301,
                FOUND: 302,
                NOT_MODIFIED: 304,

                // 4xx Client Errors
                BAD_REQUEST: 400,
                UNAUTHORIZED: 401,
                FORBIDDEN: 403,
                NOT_FOUND: 404,
                CONFLICT: 409,
                UNPROCESSABLE_ENTITY: 422,
                TOO_MANY_REQUESTS: 429,

                // 5xx Server Errors
                INTERNAL_SERVER_ERROR: 500,
                NOT_IMPLEMENTED: 501,
                BAD_GATEWAY: 502,
                SERVICE_UNAVAILABLE: 503,
                GATEWAY_TIMEOUT: 504
              } as const;

              export type StatusCode = (typeof STATUS_CODES)[keyof typeof STATUS_CODES];
      
      - type: folder
        name: controllers
        children:
          - type: file
            name: health.controller.ts
            content: |
              import { Request, Response } from "express";
              import { ApiResponse } from "../utils/api-response";
              import { AsyncHandler } from "../utils/async-handler";

              /**
              * Basic health check endpoint
              * GET /api/health
              */
              export const healthCheck = AsyncHandler(
                async (_req: Request, res: Response) => {
                  return ApiResponse.Success(res, "Service is healthy", {
                    status: "healthy",
                    timestamp: new Date().toISOString(),
                    uptime: process.uptime()
                  });
                }
              );

              /**
              * Detailed health check with system information
              * GET /api/health/detailed
              */
              export const detailedHealthCheck = AsyncHandler(
                async (_req: Request, res: Response) => {
                  const healthData = {
                    status: "healthy",
                    timestamp: new Date().toISOString(),
                    uptime: process.uptime(),
                    environment: process.env.NODE_ENV || "development",
                    version: process.env.npm_package_version || "1.0.0",
                    memory: {
                      used:
                        Math.round((process.memoryUsage().heapUsed / 1024 / 1024) * 100) /
                        100,
                      total:
                        Math.round((process.memoryUsage().heapTotal / 1024 / 1024) * 100) /
                        100,
                      unit: "MB"
                    },
                    cpu: {
                      usage: process.cpuUsage()
                    }
                  };

                  return ApiResponse.Success(res, "Service is healthy", healthData);
                }
              );
      
      - type: folder
        name: middlewares
        children:
          - type: file
            name: error-handler.ts
            content: |
              import { Request, Response, NextFunction } from "express";
              import env from "../configs/env";

              import { ApiError } from "../utils/api-error";
              import { logger } from "../utils/logger";

              export const errorHandler = (
                err: Error,
                req: Request,
                res: Response,
                next: NextFunction
              ) => {
                let statusCode = 500;
                let message = "Internal server error";

                if (err instanceof ApiError) {
                  statusCode = err.statusCode;
                  message = err.message;
                }

                logger.error(
                  err,
                  `Error: ${message} | Status: ${statusCode} | Path: ${req.method} ${req.originalUrl}`
                );

                const response = {
                  success: false,
                  message,
                  ...(env.NODE_ENV === "development" && { stack: err.stack })
                };

                res.status(statusCode).json(response);
              };
          
          - type: file
            name: not-found-handler.ts
            content: |
              import { Request, Response, NextFunction } from "express";
              import { ApiError } from "../utils/api-error";

              export const notFoundHandler = (req: Request, res: Response, next: NextFunction) => {
                next(new ApiError(404, `Not Found - ${req.originalUrl}`));
              };
      
      - type: folder
        name: routes
        children:
          - type: file
            name: health.routes.ts
            content: |
              import { Router } from "express";
              import {
                healthCheck,
                detailedHealthCheck
              } from "../controllers/health.controller";

              const router = Router();

              router.get("/", healthCheck);
              router.get("/detailed", detailedHealthCheck);

              export default router;
      
      - type: folder
        name: utils
        children:
          - type: file
            name: api-error.ts
            content: |
              import { STATUS_CODES, StatusCode } from "../constants/status-codes";

              export class ApiError extends Error {
                public readonly statusCode: StatusCode;
                public readonly isOperational: boolean;
                public readonly errors?: unknown;

                constructor(
                  statusCode: StatusCode,
                  message: string,
                  errors?: unknown,
                  isOperational = true
                ) {
                  super(message);
                  this.name = "ApiError";
                  this.statusCode = statusCode;
                  this.errors = errors;
                  this.isOperational = isOperational;

                  Error.captureStackTrace(this, this.constructor);
                }

                static badRequest(message = "Bad Request", errors?: unknown) {
                  return new ApiError(STATUS_CODES.BAD_REQUEST, message, errors);
                }

                static unauthorized(message = "Unauthorized") {
                  return new ApiError(STATUS_CODES.UNAUTHORIZED, message);
                }

                static forbidden(message = "Forbidden") {
                  return new ApiError(STATUS_CODES.FORBIDDEN, message);
                }

                static notFound(message = "Not Found") {
                  return new ApiError(STATUS_CODES.NOT_FOUND, message);
                }

                static conflict(message = "Conflict") {
                  return new ApiError(STATUS_CODES.CONFLICT, message);
                }

                static validation(message = "Validation failed", errors?: unknown) {
                  return new ApiError(STATUS_CODES.BAD_REQUEST, message, errors);
                }

                static notImplemented(message = "Not Implemented") {
                  return new ApiError(STATUS_CODES.NOT_IMPLEMENTED, message);
                }

                static badGateway(message = "Bad Gateway") {
                  return new ApiError(STATUS_CODES.BAD_GATEWAY, message);
                }

                static serviceUnavailable(message = "Service Unavailable") {
                  return new ApiError(STATUS_CODES.SERVICE_UNAVAILABLE, message);
                }

                static tooManyRequests(message = "Too Many Requests") {
                  return new ApiError(STATUS_CODES.TOO_MANY_REQUESTS, message);
                }

                static server(message = "Internal Server Error") {
                  return new ApiError(STATUS_CODES.INTERNAL_SERVER_ERROR, message);
                }
              }

              /*
              * Usage:
              * throw new ApiError(STATUS_CODES.NOT_FOUND, "Not found");
              * throw ApiError.badRequest("Bad request");
              */

        
          - type: file
            name: api-response.ts
            content: |
              import { STATUS_CODES, StatusCode } from "../constants/status-codes";
              import type { Response } from "express";

              type ApiResponseParams<T> = {
                success: boolean;
                message: string;
                statusCode: StatusCode;
                data?: T | null;
                errors?: unknown;
              };

              export class ApiResponse<T = unknown> {
                public readonly success: boolean;
                public readonly message: string;
                public readonly statusCode: StatusCode;
                public readonly data?: T | null;
                public readonly errors?: unknown;

                constructor({
                  success,
                  message,
                  statusCode,
                  data = null,
                  errors
                }: ApiResponseParams<T>) {
                  this.success = success;
                  this.message = message;
                  this.statusCode = statusCode;
                  this.data = data;
                  this.errors = errors;
                }

                send(res: Response): Response {
                  return res.status(this.statusCode).json({
                    success: this.success,
                    message: this.message,
                    statusCode: this.statusCode,
                    ...(this.data !== undefined && { data: this.data }),
                    ...(this.errors !== undefined && { errors: this.errors })
                  });
                }

                static Success<T>(
                  res: Response,
                  message: string,
                  data?: T,
                  statusCode: StatusCode = STATUS_CODES.OK
                ): Response {
                  return new ApiResponse<T>({
                    success: true,
                    message,
                    data,
                    statusCode
                  }).send(res);
                }

                static ok<T>(res: Response, message = "OK", data?: T) {
                  return ApiResponse.Success(res, message, data, STATUS_CODES.OK);
                }

                static created<T>(res: Response, message = "Created", data?: T) {
                  return ApiResponse.Success(res, message, data, STATUS_CODES.CREATED);
                }
              }

              /*
              * Usage:
              * ApiResponse.ok(res, "OK", data);
              * ApiResponse.created(res, "Created", data);
              */

         
          - type: file
            name: async-handler.ts
            content: |
              import { Request, Response, NextFunction } from "express";

              export type AsyncRouteHandler = (
                req: Request,
                res: Response,
                next: NextFunction
              ) => Promise<unknown>;

              export function AsyncHandler(fn: AsyncRouteHandler) {
                return function (req: Request, res: Response, next: NextFunction) {
                  Promise.resolve(fn(req, res, next)).catch(next);
                };
              }
         
          - type: file
            name: logger.ts
            content: |
              import pino from "pino";
              import env from "../configs/env";

              export const logger = pino({
                level: env.LOG_LEVEL,
                transport:
                  env.NODE_ENV !== "production"
                    ? {
                        target: "pino-pretty",
                        options: {
                          colorize: true,
                          translateTime: "yyyy-mm-dd HH:MM:ss",
                          ignore: "pid,hostname"
                        }
                      }
                    : undefined
              });
          
          - type: file
            name: shutdown.ts
            content: |
              import { Server } from "http";
              import { logger } from "./logger";

              export const configureGracefulShutdown = (server: Server) => {
                const signals = ["SIGTERM", "SIGINT"];

                signals.forEach(signal => {
                  process.on(signal, () => {
                    logger.info(`\n${signal} signal received. Shutting down gracefully...`);

                    server.close(err => {
                      if (err) {
                        logger.error(err, "Error during server close");
                        process.exit(1);
                      }

                      logger.info("HTTP server closed.");
                      process.exit(0);
                    });

                    // Force shutdown after 10 seconds
                    setTimeout(() => {
                      logger.error(
                        "Could not close connections in time, forcefully shutting down"
                      );
                      process.exit(1);
                    }, 10000);
                  });
                });
              };

      
      - type: file
        name: app.ts
        content: |
          import express, { Express, Request, Response } from "express";
          import cors from "cors";
          import helmet from "helmet";
          import cookieParser from "cookie-parser";
          import morgan from "morgan";
          import { notFoundHandler } from "./middlewares/not-found-handler";
          import { errorHandler } from "./middlewares/error-handler";
          import healthRoutes from "./routes/health.routes";
          import env from "./configs/env";

          const app: Express = express();

          app.use(express.json());
          app.use(express.urlencoded({ extended: true }));
          app.use(
            cors({
              origin: env.CORS_ORIGIN,
              credentials: true
            })
          );
          app.use(helmet());
          app.use(cookieParser());
          app.use(morgan(env.NODE_ENV === "development" ? "dev" : "combined"));

          // Routes

          app.get("/", (req: Request, res: Response) => {
            res.redirect("/api/health");
          });

          app.use("/api/health", healthRoutes);

          // Not found handler (should be after routes)
          app.use(notFoundHandler);

          // Global error handler (should be last)
          app.use(errorHandler);

          export default app;

      - type: file
        name: server.ts
        content: |
          import app from "./app";
          import env from "./configs/env";
          import logger from "./utils/logger";
          import { gracefulShutdown } from "./utils/shutdown";

          const server = app.listen(env.PORT, () => {
            logger.info(`Server is running on http://localhost:${env.PORT}`);
          });

          gracefulShutdown(server);
  
  - type: file
    name: .env.example
    content: |
      PORT='5000'
      NODE_ENV='development'
      CORS_ORIGIN='http://localhost:3000'
      LOG_LEVEL='info'

  - type: file
    name: tsconfig.json
    content: |
      {
        "compilerOptions": {
          "target": "ES2021",
          "module": "es2022",
          "moduleResolution": "bundler",
          "strict": true,
          "esModuleInterop": true,
          "skipLibCheck": true,
          "outDir": "dist",
          "rootDir": "src"
        },
        "include": ["src/**/*"],
        "exclude": ["node_modules"]
      }
      

feature_structure:
  - type: folder
    name: src
    children:
      - type: folder
        name: configs
        children:
          - type: file
            name: env.ts
            content: |
              import "dotenv/config";

              interface Config {
                PORT: number;
                NODE_ENV: string;
                LOG_LEVEL: string;
                CORS_ORIGIN: string;
              }

              const env: Config = {
                PORT: Number(process.env.PORT) || 3000,
                NODE_ENV: process.env.NODE_ENV || "development",
                LOG_LEVEL: process.env.LOG_LEVEL || "info",
                CORS_ORIGIN: process.env.CORS_ORIGIN || "*"
              };

              export default env;

      - type: folder
        name: modules
        children:
          - type: folder
            name: health
            children:
              - type: file
                name: health.controller.ts
                content: |
                  import { Request, Response } from "express";
                  import { ApiResponse } from "../../shared/utils/api-response";
                  import { AsyncHandler } from "../../shared/utils/async-handler";

                  /**
                  * Basic health check endpoint
                  * GET /api/health
                  */
                  export const healthCheck = AsyncHandler(
                    async (_req: Request, res: Response) => {
                      return ApiResponse.Success(res, "Service is healthy", {
                        status: "healthy",
                        timestamp: new Date().toISOString(),
                        uptime: process.uptime()
                      });
                    }
                  );

                  /**
                  * Detailed health check with system information
                  * GET /api/health/detailed
                  */
                  export const detailedHealthCheck = AsyncHandler(
                    async (_req: Request, res: Response) => {
                      const healthData = {
                        status: "healthy",
                        timestamp: new Date().toISOString(),
                        uptime: process.uptime(),
                        environment: process.env.NODE_ENV || "development",
                        version: process.env.npm_package_version || "1.0.0",
                        memory: {
                          used:
                            Math.round((process.memoryUsage().heapUsed / 1024 / 1024) * 100) /
                            100,
                          total:
                            Math.round((process.memoryUsage().heapTotal / 1024 / 1024) * 100) /
                            100,
                          unit: "MB"
                        },
                        cpu: {
                          usage: process.cpuUsage()
                        }
                      };

                      return ApiResponse.Success(res, "Service is healthy", healthData);
                    }
                  );
               
              - type: file
                name: health.routes.ts
                content: |
                  import { Router } from "express";
                  import { healthCheck, detailedHealthCheck } from "./health.controller";

                  const router = Router();

                  router.get("/", healthCheck);
                  router.get("/detailed", detailedHealthCheck);

                  export default router;
      
      - type: folder
        name: routes
        children:
          - type: file
            name: index.ts
            content: |
              import { Router } from "express";
              import HealthRouter from "../modules/health/health.routes";

              const router = Router();

              router.use("/health", HealthRouter);

              export default router;

      - type: folder
        name: shared
        children:
          - type: folder
            name: constants
            children:
              - type: file
                name: status-codes.ts
                content: |
                  export const STATUS_CODES = {
                    // 2xx Success
                    OK: 200,
                    CREATED: 201,
                    ACCEPTED: 202,
                    NO_CONTENT: 204,

                    // 3xx Redirection
                    MOVED_PERMANENTLY: 301,
                    FOUND: 302,
                    NOT_MODIFIED: 304,

                    // 4xx Client Errors
                    BAD_REQUEST: 400,
                    UNAUTHORIZED: 401,
                    FORBIDDEN: 403,
                    NOT_FOUND: 404,
                    CONFLICT: 409,
                    UNPROCESSABLE_ENTITY: 422,
                    TOO_MANY_REQUESTS: 429,

                    // 5xx Server Errors
                    INTERNAL_SERVER_ERROR: 500,
                    NOT_IMPLEMENTED: 501,
                    BAD_GATEWAY: 502,
                    SERVICE_UNAVAILABLE: 503,
                    GATEWAY_TIMEOUT: 504
                  } as const;

                  export type StatusCode = (typeof STATUS_CODES)[keyof typeof STATUS_CODES];

         
          - type: folder
            name: errors
            children:
              - type: file
                name: api-error.ts
                content: |
                  import { STATUS_CODES, StatusCode } from "../constants/status-codes";

                  export class ApiError extends Error {
                    public readonly statusCode: StatusCode;
                    public readonly isOperational: boolean;
                    public readonly errors?: unknown;

                    constructor(
                      statusCode: StatusCode,
                      message: string,
                      errors?: unknown,
                      isOperational = true
                    ) {
                      super(message);
                      this.name = "ApiError";
                      this.statusCode = statusCode;
                      this.errors = errors;
                      this.isOperational = isOperational;

                      Error.captureStackTrace(this, this.constructor);
                    }

                    static badRequest(message = "Bad Request", errors?: unknown) {
                      return new ApiError(STATUS_CODES.BAD_REQUEST, message, errors);
                    }

                    static unauthorized(message = "Unauthorized") {
                      return new ApiError(STATUS_CODES.UNAUTHORIZED, message);
                    }

                    static forbidden(message = "Forbidden") {
                      return new ApiError(STATUS_CODES.FORBIDDEN, message);
                    }

                    static notFound(message = "Not Found") {
                      return new ApiError(STATUS_CODES.NOT_FOUND, message);
                    }

                    static conflict(message = "Conflict") {
                      return new ApiError(STATUS_CODES.CONFLICT, message);
                    }

                    static validation(message = "Validation failed", errors?: unknown) {
                      return new ApiError(STATUS_CODES.BAD_REQUEST, message, errors);
                    }

                    static notImplemented(message = "Not Implemented") {
                      return new ApiError(STATUS_CODES.NOT_IMPLEMENTED, message);
                    }

                    static badGateway(message = "Bad Gateway") {
                      return new ApiError(STATUS_CODES.BAD_GATEWAY, message);
                    }

                    static serviceUnavailable(message = "Service Unavailable") {
                      return new ApiError(STATUS_CODES.SERVICE_UNAVAILABLE, message);
                    }

                    static tooManyRequests(message = "Too Many Requests") {
                      return new ApiError(STATUS_CODES.TOO_MANY_REQUESTS, message);
                    }

                    static server(message = "Internal Server Error") {
                      return new ApiError(STATUS_CODES.INTERNAL_SERVER_ERROR, message);
                    }
                  }

                  /*
                  * Usage:
                  * throw new ApiError(STATUS_CODES.NOT_FOUND, "Not found");
                  * throw ApiError.badRequest("Bad request");
                  */

          
          - type: folder
            name: middlewares
            children:
              - type: file
                name: error-handler.ts
                content: |
                  import { Request, Response, NextFunction } from "express";
                  import env from "../../configs/env";

                  import { ApiError } from "../errors/api-error";
                  import { logger } from "../utils/logger";

                  export const errorHandler = (
                    err: Error,
                    req: Request,
                    res: Response,
                    next: NextFunction
                  ) => {
                    let statusCode = 500;
                    let message = "Internal server error";

                    if (err instanceof ApiError) {
                      statusCode = err.statusCode;
                      message = err.message;
                    }

                    logger.error(
                      err,
                      `Error: ${message} | Status: ${statusCode} | Path: ${req.method} ${req.originalUrl}`
                    );

                    const response = {
                      success: false,
                      message,
                      ...(env.NODE_ENV === "development" && { stack: err.stack })
                    };

                    res.status(statusCode).json(response);
                  };

              
              - type: file
                name: not-found-handler.ts
                content: |
                  import { Request, Response, NextFunction } from "express";
                  import { ApiError } from "../errors/api-error";

                  export const notFoundHandler = (
                    req: Request,
                    res: Response,
                    next: NextFunction
                  ) => {
                    throw ApiError.notFound(`Route ${req.method} ${req.originalUrl} not found`);
                  };

          
          - type: folder
            name: utils
            children:
              - type: file
                name: api-response.ts
                content: |
                  import { STATUS_CODES, StatusCode } from "../constants/status-codes";
                  import type { Response } from "express";

                  type ApiResponseParams<T> = {
                    success: boolean;
                    message: string;
                    statusCode: StatusCode;
                    data?: T | null;
                    errors?: unknown;
                  };

                  export class ApiResponse<T = unknown> {
                    public readonly success: boolean;
                    public readonly message: string;
                    public readonly statusCode: StatusCode;
                    public readonly data?: T | null;
                    public readonly errors?: unknown;

                    constructor({
                      success,
                      message,
                      statusCode,
                      data = null,
                      errors
                    }: ApiResponseParams<T>) {
                      this.success = success;
                      this.message = message;
                      this.statusCode = statusCode;
                      this.data = data;
                      this.errors = errors;
                    }

                    send(res: Response): Response {
                      return res.status(this.statusCode).json({
                        success: this.success,
                        message: this.message,
                        statusCode: this.statusCode,
                        ...(this.data !== undefined && { data: this.data }),
                        ...(this.errors !== undefined && { errors: this.errors })
                      });
                    }

                    static Success<T>(
                      res: Response,
                      message: string,
                      data?: T,
                      statusCode: StatusCode = STATUS_CODES.OK
                    ): Response {
                      return new ApiResponse<T>({
                        success: true,
                        message,
                        data,
                        statusCode
                      }).send(res);
                    }

                    static ok<T>(res: Response, message = "OK", data?: T) {
                      return ApiResponse.Success(res, message, data, STATUS_CODES.OK);
                    }

                    static created<T>(res: Response, message = "Created", data?: T) {
                      return ApiResponse.Success(res, message, data, STATUS_CODES.CREATED);
                    }
                  }

             
              - type: file
                name: async-handler.ts
                content: |
                  import { Request, Response, NextFunction } from "express";

                  export type AsyncRouteHandler = (
                    req: Request,
                    res: Response,
                    next: NextFunction
                  ) => Promise<unknown>;

                  export function AsyncHandler(fn: AsyncRouteHandler) {
                    return function (req: Request, res: Response, next: NextFunction) {
                      Promise.resolve(fn(req, res, next)).catch(next);
                    };
                  }
              
              - type: file
                name: logger.ts
                content: |
                  import pino from "pino";
                  import env from "../../configs/env";

                  export const logger = pino({
                    level: env.LOG_LEVEL,
                    transport:
                      env.NODE_ENV !== "production"
                        ? {
                            target: "pino-pretty",
                            options: {
                              colorize: true,
                              translateTime: "yyyy-mm-dd HH:MM:ss",
                              ignore: "pid,hostname"
                            }
                          }
                        : undefined
                  });

              - type: file
                name: shutdown.ts
                content: |
                  import { Server } from "http";
                  import { logger } from "./logger";

                  export const configureGracefulShutdown = (server: Server) => {
                    const signals = ["SIGTERM", "SIGINT"];

                    signals.forEach(signal => {
                      process.on(signal, () => {
                        logger.info(`\n${signal} signal received. Shutting down gracefully...`);

                        server.close(err => {
                          if (err) {
                            logger.error(err, "Error during server close");
                            process.exit(1);
                          }

                          logger.info("HTTP server closed.");
                          process.exit(0);
                        });

                        // Force shutdown after 10 seconds
                        setTimeout(() => {
                          logger.error(
                            "Could not close connections in time, forcefully shutting down"
                          );
                          process.exit(1);
                        }, 10000);
                      });
                    });
                  };
      
      - type: file
        name: app.ts
        content: |
          import express, { Express, Request, Response } from "express";
          import "dotenv/config";
          import cors from "cors";
          import helmet from "helmet";
          import cookieParser from "cookie-parser";
          import morgan from "morgan";

          import Routes from "./routes/index";

          import { errorHandler } from "./shared/middlewares/error-handler";
          import { notFoundHandler } from "./shared/middlewares/not-found-handler";
          import env from "./configs/env";

          const app: Express = express();

          app.use(express.json());
          app.use(express.urlencoded({ extended: true }));
          app.use(
            cors({
              origin: env.CORS_ORIGIN,
              credentials: true
            })
          );
          app.use(helmet());
          app.use(cookieParser());
          app.use(morgan(env.NODE_ENV === "development" ? "dev" : "combined"));

          // Routes

          app.get("/", (req: Request, res: Response) => {
            res.redirect("/api/health");
          });

          app.use("/api", Routes);

          // Not found handler (should be after routes)
          app.use(notFoundHandler);

          // Global error handler (should be last)
          app.use(errorHandler);

          export default app;

      - type: file
        name: server.ts
        content: |
          import app from "./app";
          import env from "./configs/env";
          import logger from "./shared/utils/logger";
          import { gracefulShutdown } from "./shared/utils/shutdown";

          const server = app.listen(env.PORT, () => {
            logger.info(`Server is running on http://localhost:${env.PORT}`);
          });

          gracefulShutdown(server);

  - type: file
    name: .env.example
    content: |
      PORT='5000'
      NODE_ENV='development'
      CORS_ORIGIN='http://localhost:3000'
      LOG_LEVEL='info'    

  - type: file
    name: tsconfig.json
    content: |
      {
        "compilerOptions": {
          "target": "ES2021",
          "module": "es2022",
          "moduleResolution": "bundler",
          "strict": true,
          "esModuleInterop": true,
          "skipLibCheck": true,
          "outDir": "dist",
          "rootDir": "src"
        },
        "include": ["src/**/*"],
        "exclude": ["node_modules"]
      }
        
---

# Express Server Foundation

The **Express Server Foundation** is the core starting block provided by **servercn**. It provides a robust, production‑ready Express.js setup with sensible defaults, allowing you to focus on building features rather than boilerplate.

This foundation is not a framework; it's a well-structured boilerplate that you fully own and can extend as your project grows.

## Installation Guide

To install the Express Server Foundation, run the following command:

<PackageManagerTabs command="npx servercn init express-server" />


## What This Foundation Solves

Most Express projects require the same initial setup:
- Environment variable configuration & validation
- CORS and security headers
- Standardized API response and error formats
- TypeScript configuration
- Development tooling (hot reload, structured logging)

The Express Server Foundation standardizes these concerns using battle-tested patterns.

## Architecture Patterns

ServerCN provides two primary architectural patterns to choose from when initializing your server. You can select the one that best fits your project's scale and complexity.

### 1. MVC Architecture (Standard)

The **MVC (Model-View-Controller)** pattern is the default and is perfect for small to medium-sized applications. It separates concerns by technical role (controllers, routes, middlewares).

```
src/
├── configs/
├── constants/
├── controllers/
├── middlewares/
├── routes/
├── utils/
├── app.ts
└── server.ts
```

### 2. Feature Architecture (Scalable)

For larger applications, the **Feature Architecture** (also known as domain-driven or modular) is recommended. This structure co-locates all files related to a specific feature (e.g., `user`, `auth`) into a single module folder.

```
src/
├── configs/
├── modules/
│   ├── auth/
│   ├── users/
│   └── health/
├── routes/
├── shared/
│   ├── constants/
│   ├── errors/
│   ├── middlewares/
│   └── utils/
├── app.ts
└── server.ts
```

## Core Features

Regardless of the architecture you choose, you get these features out of the box:

### Standard Response Format
All API responses follow a predictable structure, making frontend integration seamless:

**Success Response:**
```json
{
  "success": true,
  "message": "Request successful",
  "statusCode": 200,
  "data": { ... }
}
```

**Error Response:**
```json
{
  "success": false,
  "message": "Invalid request",
  "statusCode": 400,
  "errors": []
}
```

### Fast-Fail Environment Validation
Environment variables are validated at startup using **Zod**. If a required variable (like `PORT` or `DATABASE_URL`) is missing, the server will log a clear error and exit immediately, preventing runtime crashes.

### Graceful Shutdown
The foundation includes logic to handle `SIGINT` and `SIGTERM` signals, ensuring that active requests are completed and database connections are closed properly before the process exits.

## Extending the Foundation

The Express Server Foundation is cumulative. Once initialized, you can easily add:
- **Database Starters**: Mongoose, Drizzle (MySQL/PostgreSQL)
- **Auth Components**: JWT Utilities, OAuth, RBAC
- **Utility Components**: Logger, File Upload, Email Service

Each component you add with `servercn add` will automatically align with your chosen architecture.

## Summary

Use the **Express Server Foundation** when:
- Starting a new production-ready Express API.
- You want a clean, typed foundation without the weight of a full framework.
- You need a consistent structure that scales with your team.

