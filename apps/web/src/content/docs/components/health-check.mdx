---
title: Health Check
description: Production-ready health check endpoints for monitoring API status, database connectivity, and system health in Express applications.
command: npx servercn add health-check

mvc_structure:
  - type: folder
    name: src
    children:
      - type: folder
        name: constants
        children:
          - type: file
            name: status-codes.ts
            content: |
              export const STATUS_CODES = {
                // 2xx Success
                OK: 200,
                CREATED: 201,
                ACCEPTED: 202,
                NO_CONTENT: 204,

                // 3xx Redirection
                MOVED_PERMANENTLY: 301,
                FOUND: 302,
                NOT_MODIFIED: 304,

                // 4xx Client Errors
                BAD_REQUEST: 400,
                UNAUTHORIZED: 401,
                FORBIDDEN: 403,
                NOT_FOUND: 404,
                CONFLICT: 409,
                UNPROCESSABLE_ENTITY: 422,
                TOO_MANY_REQUESTS: 429,

                // 5xx Server Errors
                INTERNAL_SERVER_ERROR: 500,
                NOT_IMPLEMENTED: 501,
                BAD_GATEWAY: 502,
                SERVICE_UNAVAILABLE: 503,
                GATEWAY_TIMEOUT: 504,
              } as const;

              export type StatusCode = (typeof STATUS_CODES)[keyof typeof STATUS_CODES];

      - type: folder
        name: controllers
        children:
          - type: file
            name: health.controller.ts
            content: |
              import { Request, Response } from "express";
              import { ApiResponse } from "../utils/api-response";

              /**
              * Basic health check endpoint
              * GET /api/health
              */
              export const healthCheck = async (_req: Request, res: Response) => {
                return ApiResponse.Success(res, "Service is healthy", {
                  status: "healthy",
                  timestamp: new Date().toISOString(),
                  uptime: process.uptime(),
                });
              };

              /**
              * Detailed health check with system information
              * GET /api/health/detailed
              */
              export const detailedHealthCheck = async (_req: Request, res: Response) => {
                const healthData = {
                  status: "healthy",
                  timestamp: new Date().toISOString(),
                  uptime: process.uptime(),
                  environment: process.env.NODE_ENV || "development",
                  version: process.env.npm_package_version || "1.0.0",
                  memory: {
                    used:
                      Math.round((process.memoryUsage().heapUsed / 1024 / 1024) * 100) / 100,
                    total:
                      Math.round((process.memoryUsage().heapTotal / 1024 / 1024) * 100) / 100,
                    unit: "MB",
                  },
                  cpu: {
                    usage: process.cpuUsage(),
                  },
                };

                return ApiResponse.Success(res, "Service is healthy", healthData);
              };

      - type: folder
        name: routes
        children:
          - type: file
            name: health.routes.ts
            content: |
              import { Router } from "express";
              import {
                healthCheck,
                detailedHealthCheck,
              } from "../controllers/health.controller";

              const router = Router();

              router.get("/", healthCheck);
              router.get("/detailed", detailedHealthCheck);

              export default router;

      - type: folder
        name: utils
        children:
          - type: file
            name: api-response.ts
            content: |
              import type { Response } from "express";
              import { STATUS_CODES, StatusCode } from "../constants/status-codes";

              type ApiResponseParams<T> = {
                success: boolean;
                message: string;
                statusCode: StatusCode;
                data?: T | null;
                errors?: unknown;
              };

              export class ApiResponse<T = unknown> {
                public readonly success: boolean;
                public readonly message: string;
                public readonly statusCode: StatusCode;
                public readonly data?: T | null;
                public readonly errors?: unknown;

                constructor({
                  success,
                  message,
                  statusCode,
                  data = null,
                  errors,
                }: ApiResponseParams<T>) {
                  this.success = success;
                  this.message = message;
                  this.statusCode = statusCode;
                  this.data = data;
                  this.errors = errors;
                }

                send(res: Response): Response {
                  return res.status(this.statusCode).json({
                    success: this.success,
                    message: this.message,
                    statusCode: this.statusCode,
                    ...(this.data !== undefined && { data: this.data }),
                    ...(this.errors !== undefined && { errors: this.errors }),
                  });
                }

                static Success<T>(
                  res: Response,
                  message: string,
                  data?: T,
                  statusCode: StatusCode = STATUS_CODES.OK
                ): Response {
                  return new ApiResponse<T>({
                    success: true,
                    message,
                    data,
                    statusCode,
                  }).send(res);
                }

                static ok<T>(res: Response, message = "OK", data?: T) {
                  return ApiResponse.Success(res, message, data, STATUS_CODES.OK);
                }

                static created<T>(res: Response, message = "Created", data?: T) {
                  return ApiResponse.Success(res, message, data, STATUS_CODES.CREATED);
                }
              }

              /*
              * Usage:
              * ApiResponse.ok(res, "OK", data);
              * ApiResponse.created(res, "Created", data);
              */

      - type: file
        name: app.ts
        content: |
          import express, { type Application } from "express";
          import "dotenv/config";
          import healthRoutes from "./routes/health.routes";

          const app: Application = express();

          app.use(express.json());

          // Health check routes
          app.use("/api/v1/health", healthRoutes);

          // Other routes here
          // ...

          const PORT = process.env.PORT || 3000;

          app.listen(PORT, () => {
            console.log(<Code children="Server is running on http://localhost:${PORT}" />);
          });

          export default app;

  - type: file
    name: .env.example
    content: |
      PORT='3000'
      NODE_ENV='development'

feature_structure:
  - type: folder
    name: src
    children:
      - type: folder
        name: modules
        children:
          - type: folder
            name: health
            children:
              - type: file
                name: health.controller.ts
                content: |
                  import { Request, Response } from "express";
                  import { ApiResponse } from "../../shared/utils/api-response";

                  /**
                  * Basic health check endpoint
                  * GET /api/health
                  */
                  export const healthCheck = async (_req: Request, res: Response) => {
                    return ApiResponse.Success(res, "Service is healthy", {
                      status: "healthy",
                      timestamp: new Date().toISOString(),
                      uptime: process.uptime(),
                    });
                  };

                  /**
                  * Detailed health check with system information
                  * GET /api/health/detailed
                  */
                  export const detailedHealthCheck = async (_req: Request, res: Response) => {
                    const healthData = {
                      status: "healthy",
                      timestamp: new Date().toISOString(),
                      uptime: process.uptime(),
                      environment: process.env.NODE_ENV || "development",
                      version: process.env.npm_package_version || "1.0.0",
                      memory: {
                        used:
                          Math.round((process.memoryUsage().heapUsed / 1024 / 1024) * 100) / 100,
                        total:
                          Math.round((process.memoryUsage().heapTotal / 1024 / 1024) * 100) / 100,
                        unit: "MB",
                      },
                      cpu: {
                        usage: process.cpuUsage(),
                      },
                    };

                    return ApiResponse.Success(res, "Service is healthy", healthData);
                  };

              - type: file
                name: health.routes.ts
                content: |
                  import { Router } from "express";
                  import {
                    healthCheck,
                    detailedHealthCheck,
                  } from "./health.controller";

                  const router = Router();

                  router.get("/", healthCheck);
                  router.get("/detailed", detailedHealthCheck);

                  export default router;

      - type: folder
        name: routes
        children:
          - type: file
            name: index.ts
            content: |
              import { Router } from "express";
              import healthRoutes from "../modules/health/health.routes";

              const router = Router();

              router.get("/health", healthRoutes);

              export default router;

      - type: folder
        name: shared
        children:
          - type: folder
            name: constants
            children:
              - type: file
                name: status-codes.ts
                content: |
                  export const STATUS_CODES = {
                    // 2xx Success
                    OK: 200,
                    CREATED: 201,
                    ACCEPTED: 202,
                    NO_CONTENT: 204,

                    // 3xx Redirection
                    MOVED_PERMANENTLY: 301,
                    FOUND: 302,
                    NOT_MODIFIED: 304,

                    // 4xx Client Errors
                    BAD_REQUEST: 400,
                    UNAUTHORIZED: 401,
                    FORBIDDEN: 403,
                    NOT_FOUND: 404,
                    CONFLICT: 409,
                    UNPROCESSABLE_ENTITY: 422,
                    TOO_MANY_REQUESTS: 429,

                    // 5xx Server Errors
                    INTERNAL_SERVER_ERROR: 500,
                    NOT_IMPLEMENTED: 501,
                    BAD_GATEWAY: 502,
                    SERVICE_UNAVAILABLE: 503,
                    GATEWAY_TIMEOUT: 504,
                  } as const;

                  export type StatusCode = (typeof STATUS_CODES)[keyof typeof STATUS_CODES];

          - type: folder
            name: utils
            children:
              - type: file
                name: api-response.ts
                content: |
                  import type { Response } from "express";
                  import { STATUS_CODES, StatusCode } from "../constants/status-codes";

                  type ApiResponseParams<T> = {
                    success: boolean;
                    message: string;
                    statusCode: StatusCode;
                    data?: T | null;
                    errors?: unknown;
                  };

                  export class ApiResponse<T = unknown> {
                    public readonly success: boolean;
                    public readonly message: string;
                    public readonly statusCode: StatusCode;
                    public readonly data?: T | null;
                    public readonly errors?: unknown;

                    constructor({
                      success,
                      message,
                      statusCode,
                      data = null,
                      errors,
                    }: ApiResponseParams<T>) {
                      this.success = success;
                      this.message = message;
                      this.statusCode = statusCode;
                      this.data = data;
                      this.errors = errors;
                    }

                    send(res: Response): Response {
                      return res.status(this.statusCode).json({
                        success: this.success,
                        message: this.message,
                        statusCode: this.statusCode,
                        ...(this.data !== undefined && { data: this.data }),
                        ...(this.errors !== undefined && { errors: this.errors }),
                      });
                    }

                    static Success<T>(
                      res: Response,
                      message: string,
                      data?: T,
                      statusCode: StatusCode = STATUS_CODES.OK
                    ): Response {
                      return new ApiResponse<T>({
                        success: true,
                        message,
                        data,
                        statusCode,
                      }).send(res);
                    }

                    static ok<T>(res: Response, message = "OK", data?: T) {
                      return ApiResponse.Success(res, message, data, STATUS_CODES.OK);
                    }

                    static created<T>(res: Response, message = "Created", data?: T) {
                      return ApiResponse.Success(res, message, data, STATUS_CODES.CREATED);
                    }
                  }

                  /*
                  * Usage:
                  * ApiResponse.ok(res, "OK", data);
                  * ApiResponse.created(res, "Created", data);
                  */

      - type: file
        name: app.ts
        content: |
          import express, { type Application } from "express";
          import "dotenv/config";
          import Routes from "./routes/index.ts";

          const app: Application = express();

          app.use(express.json());

          // Health check routes
          app.use("/api/v1", Routes);

          // Other routes here
          // ...

          const PORT = process.env.PORT || 3000;

          app.listen(PORT, () => {
            console.log(<Code children="Server is running on http://localhost:${PORT}" />);
          });

          export default app;

  - typ: file
    name: .env.example
    content: |
      PORT='3000'
      NODE_ENV='development'
---

# Health Check

The **Health Check** component provides production-ready endpoints for monitoring your API's status, system health, and service availability. Essential for load balancers, monitoring systems, and deployment tools.

## Features

- **Basic health check** - Simple endpoint to verify service is running
- **Detailed health check** - System information including memory, CPU, and uptime
- **Database connectivity check** - Optional database health verification
- **Customizable** - Easy to extend with additional health checks
- **Production-ready** - Standardized responses for monitoring tools

## Installation Guide

This component requires additional ServerCN components.

**_ðŸ‘‰ Note:_** _You do not need to install any dependencies manually. Installing this component will automatically install all required dependencies. Manual installation is optional if you prefer to manage dependencies yourself._

### 1. Install ServerCN dependencies(Optional)

- **HTTP Status Codes:**
  <PackageManagerTabs command="npx servercn add http-status-codes" />

Documentation:
[HTTP Status Codes](/docs/components/http-status-codes)

- **Api Response Handler:**
  <PackageManagerTabs command="npx servercn add response-formatter" />

Documentation:
[Api Response Handler](/docs/components/response-formatter)

- **Api Error Handler:**
  <PackageManagerTabs command="npx servercn add error-handler" />

Documentation:
[Api Error Handler](/docs/components/error-handler)

- **Async Handler:**
  <PackageManagerTabs command="npx servercn add async-handler" />

Documentation:
[Async Handler](/docs/components/async-handler)

### 2. Install this component

<PackageManagerTabs command="npx servercn add health-check" />

## Basic Implementation

### 1. MVC Structure

Create health check controller in <Code children="src/controllers/health.controller.ts" />:

```ts
import { Request, Response } from "express";
import { ApiResponse } from "../utils/api-response";

export const healthCheck = async (_req: Request, res: Response) => {
  return ApiResponse.Success(res, "Service is healthy", {
    status: "healthy",
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
};
```

Create routes in <Code children="src/routes/health.routes.ts" />:

```ts
import { Router } from "express";
import { healthCheck } from "../controllers/health.controller";

const router = Router();

router.get("/", healthCheck);

export default router;
```

### 2. Feature Structure

For feature-based architecture, place controller in <Code children="src/modules/health/health.controller.ts" />:

```ts
import { Request, Response } from "express";
import { ApiResponse } from "../../shared/utils/api-response";

export const healthCheck = async (_req: Request, res: Response) => {
  return ApiResponse.Success(res, "Service is healthy", {
    status: "healthy",
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
};
```

## Usage Examples

### 1. Basic Health Check

Simple endpoint that returns service status:

```ts
import { ApiResponse } from "../utils/api-response";

export const healthCheck = async (_req: Request, res: Response) => {
  return ApiResponse.Success(res, "Service is healthy", {
    status: "healthy",
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
};
```

**Response:**

```json
{
  "success": true,
  "message": "Service is healthy",
  "statusCode": 200,
  "data": {
    "status": "healthy",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "uptime": 3600.5
  }
}
```

### 2. Detailed Health Check

Include system information:

```ts
import { ApiResponse } from "../utils/api-response";

export const detailedHealthCheck = async (_req: Request, res: Response) => {
  const healthData = {
    status: "healthy",
    timestamp: new Date().toISOString(),
    uptime: process.uptime(),
    environment: process.env.NODE_ENV || "development",
    version: process.env.npm_package_version || "1.0.0",
    memory: {
      used: Math.round((process.memoryUsage().heapUsed / 1024 / 1024) * 100) / 100,
      total: Math.round((process.memoryUsage().heapTotal / 1024 / 1024) * 100) / 100,
      unit: "MB"
    },
    cpu: {
      usage: process.cpuUsage()
    }
  };

  return ApiResponse.Success(res, "Service is healthy", healthData);
};
```

**Response:**

```json
{
  "success": true,
  "message": "Service is healthy",
  "statusCode": 200,
  "data": {
    "status": "healthy",
    "timestamp": "2026-01-09T14:15:21.360Z",
    "uptime": 155.729376,
    "environment": "development",
    "version": "1.0.0",
    "memory": {
      "used": 41.59,
      "total": 44.46,
      "unit": "MB"
    },
    "cpu": {
      "usage": {
        "user": 3031000,
        "system": 812000
      }
    }
  }
}
```

### 4. Health Check with External Services

Check external service dependencies:

```ts
export const healthCheckWithServices = async (_req: Request, res: Response) => {
  const checks = {
    status: "healthy",
    timestamp: new Date().toISOString(),
    checks: {
      database: await checkDatabase(),
      redis: await checkRedis(),
      externalApi: await checkExternalApi()
    }
  };

  // Determine overall health
  const allHealthy = Object.values(checks.checks).every(status => status === "healthy");

  if (!allHealthy) {
    checks.status = "degraded";
    return ApiResponse.Error(res, "Service is degraded", checks);
  }

  return ApiResponse.Success(res, "Service is healthy", checks);
};

async function checkDatabase(): Promise<string> {
  try {
    // Your database check logic
    return "healthy";
  } catch {
    return "unhealthy";
  }
}

async function checkRedis(): Promise<string> {
  try {
    // Your Redis check logic
    return "healthy";
  } catch {
    return "unhealthy";
  }
}

async function checkExternalApi(): Promise<string> {
  try {
    // Your external API check logic
    return "healthy";
  } catch {
    return "unhealthy";
  }
}
```

### 5. Using Async Handler

With async handler for better error handling:

```ts
import { AsyncHandler } from "../utils/async-handler";

export const healthCheck = AsyncHandler(async (_req: Request, res: Response) => {
  return ApiResponse.Success(res, "Service is healthy", {
    status: "healthy",
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});
```

## Route Setup

### Basic Setup

<Code children="src/app.ts" />

```ts
import express, { type Application } from "express";
import healthRoutes from "./routes/health.routes";

const app: Application = express();

app.use(express.json());

// Health check routes (usually placed early)
app.use("/api/health", healthRoutes);

// Other routes...
```

### Multiple Health Endpoints

<Code children="src/routes/health.routes.ts" />

```ts
import { Router } from "express";
import { healthCheck, detailedHealthCheck, healthCheckWithDB } from "../controllers/health.controller";

const router = Router();

router.get("/", healthCheck);
router.get("/detailed", detailedHealthCheck);
router.get("/db", healthCheckWithDB);

export default router;
```

## Best Practices

1. **Keep it fast** - Health checks should respond quickly (< 100ms)
2. **Don't include sensitive data** - Avoid exposing internal details
3. **Use appropriate status codes** - 200 for healthy, 503 for unhealthy
4. **Monitor dependencies** - Check critical services (DB, Redis, etc.)
5. **Set up alerts** - Configure alerts based on health check failures
6. **Version your API** - Include version information in detailed checks

## Response Format

### Healthy Response (200)

```json
{
  "success": true,
  "message": "Service is healthy",
  "statusCode": 200,
  "data": {
    "status": "healthy",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "uptime": 3600.5
  }
}
```

### Unhealthy Response (503)

```json
{
  "success": false,
  "message": "Service is unhealthy",
  "statusCode": 503,
  "data": {
    "status": "unhealthy",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "checks": {
      "database": "disconnected"
    }
  }
}
```

## Security Considerations

1. **Rate limiting** - Consider rate limiting health check endpoints
2. **Authentication** - Optionally protect detailed endpoints
3. **IP whitelisting** - Restrict access to monitoring IPs if needed
4. **Information disclosure** - Don't expose sensitive system information

## Common Use Cases

- **Load balancer health checks** - Verify service availability
- **Monitoring systems** - Track service uptime and performance
- **Deployment verification** - Confirm successful deployments
- **Auto-scaling** - Determine when to scale services
- **Incident response** - Quick status verification during outages
