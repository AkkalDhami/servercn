{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ServerCN Config",
  "description": "Configuration file for ServerCN projects",
  "type": "object",
  "required": ["version", "project", "stack", "meta"],

  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON schema for ServerCN config"
    },
    "version": {
      "type": "string",
      "description": "Current version of ServerCN config",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },

    "project": {
      "type": "object",
      "required": ["root", "srcDir", "type"],
      "properties": {
        "root": {
          "type": "string",
          "description": "Project root directory"
        },
        "srcDir": {
          "type": "string",
          "description": "Source directory"
        },
        "type": {
          "type": "string",
          "enum": ["backend", "fullstack"],
          "description": "Type of project"
        }
      },
      "additionalProperties": false
    },

    "stack": {
      "type": "object",
      "required": ["runtime", "language", "framework", "architecture"],
      "properties": {
        "runtime": {
          "type": "string",
          "enum": ["node", "deno", "bun"],
          "description": "Runtime environment"
        },
        "language": {
          "type": "string",
          "enum": ["typescript"],
          "description": "Programming language"
        },
        "framework": {
          "type": "string",
          "enum": ["express", "nest", "fastify", "hono"],
          "description": "Framework used in project"
        },
        "architecture": {
          "type": "string",
          "enum": ["mvc", "feature"],
          "description": "Project architecture pattern"
        }
      },
      "additionalProperties": false
    },

    "database": {
      "type": ["object", "null"],
      "required": ["type", "orm"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["mongodb", "postgresql", "mysql"],
          "description": "Database type"
        },
        "orm": {
          "type": "string",
          "enum": ["mongoose", "drizzle", "none"],
          "description": "ORM used for database"
        }
      },
      "additionalProperties": false
    },

    "meta": {
      "type": "object",
      "required": ["createdAt", "createdBy"],
      "properties": {
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "createdBy": {
          "type": "string",
          "description": "Generated by ServerCN version"
        }
      },
      "additionalProperties": false
    }
  },

  "additionalProperties": false
}
